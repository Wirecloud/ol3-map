null==window.StyledElements&&(window.StyledElements={}),function(){"use strict";const e={gettext:function(e){return e},ngettext:function(e,t,n){return 1===n?e:t},interpolate:function(e,t){return e.replace(/%\(\w+\)s/g,function(e){return String(t[e.slice(2,-2)])})},Template:function(e){this.template=e}};e.Template.prototype.evaluate=function(t){return e.interpolate(this.template,t)},e.stopPropagationListener=function(e){e.stopPropagation()},e.preventDefaultListener=function(e){e.preventDefault()},e.callCallback=function(e,t){if("function"==typeof e)try{return e.apply(null,Array.prototype.slice.call(arguments,1))}catch(e){}},e.getFullscreenElement=function(){return"fullscreenElement"in document?document.fullscreenElement:"msFullscreenElement"in document?document.msFullscreenElement:"mozFullScreenElement"in document?document.mozFullScreenElement:"webkitFullscreenElement"in document?document.webkitFullscreenElement:void 0},e.onFullscreenChange=function(e,t){e instanceof StyledElements.StyledElement&&(e=e.wrapperElement),e.ownerDocument.addEventListener("fullscreenchange",t,!0),e.ownerDocument.addEventListener("msfullscreenchange",t,!0),e.ownerDocument.addEventListener("mozfullscreenchange",t,!0),e.ownerDocument.addEventListener("webkitfullscreenchange",t,!0)},e.removeFullscreenChangeCallback=function(e,t){e instanceof StyledElements.StyledElement&&(e=e.wrapperElement),e.ownerDocument.removeEventListener("fullscreenchange",t,!0),e.ownerDocument.removeEventListener("msfullscreenchange",t,!0),e.ownerDocument.removeEventListener("mozfullscreenchange",t,!0),e.ownerDocument.removeEventListener("webkitfullscreenchange",t,!0)},e.isFullscreenSupported=function(){return"fullscreenEnabled"in document?document.fullscreenEnabled:"mozFullScreenEnabled"in document?document.mozFullScreenEnabled:"webkitFullscreenEnabled"in document?document.webkitFullscreenEnabled:void 0},e.removeWord=function(e,t){return e.replace(new RegExp("(^\\s*|\\s+)"+t+"(\\s+|\\s*$)","g")," ").trim()},e.appendWord=function(t,n){return e.removeWord(t,n)+" "+n},e.prependWord=function(t,n){return n+" "+e.removeWord(t,n)},e.escapeRegExp=function(e){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")};const t=document.createElement("div");e.escapeHTML=function(e){return t.textContent=e,t.innerHTML},e.getRelativePosition=function(e,t){if(e===t)return{x:0,y:0};const n=e.getBoundingClientRect(),s=t.getBoundingClientRect();return{x:n.left-s.left,y:n.top-s.top}},e.clone=function(t,n){let s;if(null==t||"object"!=typeof t)return t;if(s=Array.isArray(t)?[]:{},n)for(const n in t)s[n]=e.clone(t[n],!0);else for(const e in t)s[e]=t[e];return s},e.cloneObject=function(t){const s={};if(null==t)return s;if(!e.isPlainObject(t))throw new TypeError("[error description]");for(const i in t)s[i]=n.call(e,t[i]);return s};const n=function(t){return null==t?null:e.isPlainObject(t)?this.cloneObject(t):Array.isArray(t)?t.slice():t};e.hasFocus=function(e){return document.activeElement===e},e.updateObject=function(t,n){t=e.cloneObject(t),n=e.cloneObject(n);for(const i in n)t[i]=s.call(e,t[i],n[i]);return t},e.isPlainObject=function(e){return"object"==typeof e&&null!==e&&!(e.constructor&&!Object.hasOwnProperty.call(e.constructor.prototype,"isPrototypeOf"))};const s=function(t,n){var s;return null==n?null==t&&(t=null):"function"==typeof n?(null==t||function(e,t){if("function"!=typeof e||"function"!=typeof t)return i;const n=e.prototype;let s=t.prototype,i=!1;for(;!(i=n===s)&&null!==(s=Object.getPrototypeOf(s))&&(s!==Object.prototype||n===s););return i}(t,n))&&(t=n):e.isPlainObject(n)?(null==t||e.isPlainObject(t))&&(t=this.updateObject(t,n)):Array.isArray(n)?(null==t&&(t=[]),Array.isArray(t)&&(t=t.concat(n))):null!=t&&(s=n,t.constructor!==s.constructor)||(t=n),t};e.inherit=function(t,n,s){t.prototype=Object.create(n.prototype),t.prototype.constructor=t,e.merge(t.prototype,s)},e.highlight=function(e,t){return e.replace(new RegExp(t,"i"),function(e){return'<strong class="text-highlighted">'+e+"</strong>"})},e.capitalize=function(e){return e.charAt(0).toUpperCase()+e.substring(1)};const i=["bytes","KiB","MiB","GiB","TiB"];Object.freeze(i),e.formatSize=function(t){if(null==t)return e.gettext("N/A");let n;for(n=0;n<i.length&&!(t<1024);n++)t/=1024;return(t=Math.round(100*t)/100)+" "+i[n]};const l={8:"Backspace",9:"Tab",13:"Enter",27:"Escape",32:" ",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",46:"Delete",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z"},r={Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Spacebar:" "};e.extractModifiers=function(e){return{altKey:e.altKey,ctrlKey:e.ctrlKey,metaKey:e.metaKey,shiftKey:e.shiftKey}};const a=["Escape","Enter"];e.stopInputKeydownPropagationListener=function(t){const n=e.extractModifiers(t),s=e.normalizeKey(t);(n.altKey||n.metaKey||n.ctrlKey||-1!==a.indexOf(s))&&"Backspace"!==s||t.stopPropagation()},e.normalizeKey=function(e){let t=e.key;return!1===e.altKey&&t?t in r&&(t=r[t]):(t="Unidentified",e.keyCode in l&&(t=l[e.keyCode])),t},e.isElement=function(e){return null!=e&&"object"==typeof e&&"ownerDocument"in e&&e instanceof e.ownerDocument.defaultView.HTMLElement},e.appendChild=function(e,t,n){const s=o(e);let i=c(n);return null!=i&&(i=i.nextSibling),"string"==typeof t&&(t=document.createTextNode(t)),h(t).map(function(t){return s.insertBefore(o(t),i),e instanceof StyledElements.StyledElement&&t instanceof StyledElements.StyledElement&&(t.parentElement=e),t})},e.prependChild=function(e,t,n){const s=o(e),i=u(n);return"string"==typeof t&&(t=document.createTextNode(t)),h(t).map(function(t){return s.insertBefore(o(t),null==i?s.firstChild:i),e instanceof StyledElements.StyledElement&&t instanceof StyledElements.StyledElement&&(t.parentElement=e),t})},e.removeChild=function(e,t){o(e).removeChild(o(t)),e instanceof StyledElements.StyledElement&&t instanceof StyledElements.StyledElement&&(t.parentElement=null)};const o=function(e){return e instanceof StyledElements.StyledElement?e.get():e},u=function(e){return e instanceof StyledElements.Fragment?e.elements[0]:e instanceof StyledElements.StyledElement?e.get():e},c=function(e){return e instanceof StyledElements.Fragment?e.elements[e.elements.length-1]:e instanceof StyledElements.StyledElement?e.get():e},h=function(e){return e instanceof StyledElements.StyledElement&&null==e.get()?e.children:[e]};e.isEmpty=function(e){return null==e||0===Object.keys(e).length},e.merge=Object.assign,e.update=function(e){if(null==e||"object"!=typeof e)throw new TypeError("object argument must be an object");return Array.prototype.slice.call(arguments,1).forEach(function(t){null!=t&&Object.keys(t).forEach(function(n){n in e&&(e[n]=t[n])})}),e},e.values=function(e){const t=[];for(const n in e)t.push(e[n]);return t},e.setupdate=function(e,t){for(const n of t)e.add(n);return e},e.timeoutPromise=function(e,t,n){const s=new Promise((e,s)=>{const i=setTimeout(()=>{clearTimeout(i),null!=n?e(n):s("Timed out in "+t+"ms.")},t)});return Promise.race([e,s])},e.waitTransition=function(e){return new Promise(t=>{if(null===e.parentNode&&t(),"none"!==e.ownerDocument.defaultView.getComputedStyle(e,null).getPropertyValue("display")){const n=function n(s){e.removeEventListener("transitionend",n),t()};e.addEventListener("transitionend",n)}else t()})},e.removeFromArray=function(e,t){const n=e.indexOf(t);-1!==n&&e.splice(n,1)},StyledElements.Utils=e}(),function(e,t){"use strict";const n=new WeakMap;e.Event=class{constructor(e){Object.defineProperties(this,{context:{value:e},handlers:{value:[]}}),n.set(this,{dispatching:!1})}addEventListener(e){if("function"!=typeof e)throw new TypeError("Handlers must be functions");this.handlers.push(e)}removeEventListener(e){if("function"!=typeof e)throw new TypeError("Handlers must be functions");for(let t=this.handlers.length-1;t>=0;t--)this.handlers[t]===e&&(n.get(this).dispatching?this.handlers[t]=null:this.handlers.splice(t,1))}clearEventListeners(){n.get(this).dispatching?this.handlers.forEach(function(e,t,n){n[t]=null}):this.handlers.length=0}dispatch(){const e=n.get(this),t=[this.context,...arguments];e.dispatching=!0;for(let e=0;e<this.handlers.length;e++)if(null!=this.handlers[e])try{this.handlers[e].apply(this.context,t)}catch(e){null!=window.console&&"function"==typeof window.console.error&&window.console.error(e)}for(let e=this.handlers.length-1;e>=0;e--)null==this.handlers[e]&&this.handlers.splice(e,1);e.dispatching=!1}}}(StyledElements,StyledElements.Utils),function(e,t){"use strict";e.ObjectWithEvents=class{constructor(t){this.events={},(Array.isArray(t)?t:[]).forEach(function(t){this.events[t]=new e.Event(this)},this)}dispatchEvent(e,...n){if(!(e in this.events))throw new Error(t.interpolate("Unhandled event '%(name)s'",{name:e}));return this.events[e].dispatch(...n),this}addEventListener(e,n){if(!(e in this.events))throw new Error(t.interpolate("Unhandled event '%(name)s'",{name:e}));return this.events[e].addEventListener(n),this}clearEventListeners(e){if("string"!=typeof e){for(e in this.events)this.events[e].clearEventListeners();return this}if(!(e in this.events))throw new Error(t.interpolate("Unhandled event '%(name)s'",{name:e}));return this.events[e].clearEventListeners(),this}destroy(){return this.events=null,this}removeEventListener(e,n){if(!(e in this.events))throw new Error(t.interpolate("Unhandled event '%(name)s'",{name:e}));return this.events[e].removeEventListener(n),this}on(){return this.addEventListener(...arguments)}off(){return this.removeEventListener(...arguments)}}}(StyledElements,StyledElements.Utils),function(e,t){"use strict";const n=function(e){this.get().classList.add(e)},s=function(e){this.get().classList.remove(e)},i=function(e){this.get().classList.contains(e)?this.get().classList.remove(e):this.get().classList.add(e)};e.StyledElement=class extends e.ObjectWithEvents{constructor(e){e=Array.isArray(e)?e:[],super(["hide","show"].concat(e)),this.wrapperElement=null,this.parentElement=null,Object.defineProperties(this,{enabled:{get:function(){return!this.hasClassName("disabled")},set:function(e){e=!!e,this.enabled!==e&&this.toggleClassName("disabled",!e)._onenabled(e)}},hidden:{get:function(){return this.hasClassName("hidden")},set:function(e){this.toggleClassName("hidden",e)._onhidden(e)}}})}_onenabled(e){}_onhidden(e){}addClassName(e){if(!Array.isArray(e)){if(""===(e=null==e?"":e.toString().trim()))return this;e=e.split(/\s+/)}return e.forEach(n,this),this}appendTo(n,s){return n instanceof e.StyledElement&&"function"==typeof n.appendChild?n.appendChild(this,s):t.appendChild(n,this,s),this}destroy(){this.remove(),super.destroy(this)}disable(){return this.enabled=!1,this}enable(){return this.enabled=!0,this}get(){return this.wrapperElement}hide(){return this.hidden||(this.hidden=!0,this.dispatchEvent("hide")),this}parent(){return null!=this.parentElement?this.parentElement.get():this.get().parentElement}prependTo(n,s){return n instanceof e.StyledElement&&"function"==typeof n.prependChild?n.prependChild(this,s):t.prependChild(n,this,s),this}remove(){return this.parentElement instanceof e.StyledElement&&"function"==typeof this.parentElement.removeChild?this.parentElement.removeChild(this):this.get().remove(),this}replaceClassName(e,t){return this.removeClassName(e),this.addClassName(t),this}show(){return this.hidden&&(this.hidden=!1,this.dispatchEvent("show")),this}style(e,t){if(1===arguments.length){if("string"==typeof e)return this.get().style[e];for(const t in e)this.get().style[t]=e[t]}else this.get().style[e]=null!=t?t:"";return this}toggleClassName(e,t){if(Array.isArray(e)||(e=""!==(e=null==e?[]:e.toString().trim())?e.split(/\s+/):[]),e.length)if("boolean"!=typeof t)e.forEach(i,this);else{const i=t?n:s;e.forEach(i,this)}return this}_getUsableHeight(){const e=this.wrapperElement.parentElement;if(null==e)return null;const t=document.defaultView.getComputedStyle(e,null);if(null==t.getPropertyCSSValue("display"))return null;const n=document.defaultView.getComputedStyle(this.wrapperElement,null);return e.offsetHeight-t.getPropertyCSSValue("padding-top").getFloatValue(CSSPrimitiveValue.CSS_PX)-t.getPropertyCSSValue("padding-bottom").getFloatValue(CSSPrimitiveValue.CSS_PX)-n.getPropertyCSSValue("padding-top").getFloatValue(CSSPrimitiveValue.CSS_PX)-n.getPropertyCSSValue("padding-bottom").getFloatValue(CSSPrimitiveValue.CSS_PX)-n.getPropertyCSSValue("border-top-width").getFloatValue(CSSPrimitiveValue.CSS_PX)-n.getPropertyCSSValue("border-bottom-width").getFloatValue(CSSPrimitiveValue.CSS_PX)-n.getPropertyCSSValue("margin-top").getFloatValue(CSSPrimitiveValue.CSS_PX)-n.getPropertyCSSValue("margin-bottom").getFloatValue(CSSPrimitiveValue.CSS_PX)}_getUsableWidth(){const e=this.wrapperElement.parentElement;if(null==e)return null;const t=document.defaultView.getComputedStyle(e,null),n=document.defaultView.getComputedStyle(this.wrapperElement,null);return e.offsetWidth-t.getPropertyCSSValue("padding-left").getFloatValue(CSSPrimitiveValue.CSS_PX)-t.getPropertyCSSValue("padding-right").getFloatValue(CSSPrimitiveValue.CSS_PX)-n.getPropertyCSSValue("padding-left").getFloatValue(CSSPrimitiveValue.CSS_PX)-n.getPropertyCSSValue("padding-right").getFloatValue(CSSPrimitiveValue.CSS_PX)}getBoundingClientRect(){return this.wrapperElement.getBoundingClientRect()}hasClassName(e){return e=null==e?"":e.toString().trim(),this.get().classList.contains(e)}insertInto(e,t){return null!=t?this.prependTo(e,t):this.appendTo(e)}removeClassName(e){if(!Array.isArray(e)){if(""===(e=null==e?"":e.toString().trim()))return this.get().className="",this;e=e.split(/\s+/)}return e.forEach(s,this),this}repaint(e){return this}setDisabled(e){return e?this.disable():this.enable()}}}(StyledElements,StyledElements.Utils),function(e,t){"use strict";e.OffCanvasLayout=class extends e.StyledElement{constructor(n){super(["slideIn","slideOut"]),n=t.merge({sideway:"left"},n),this.wrapperElement=document.createElement("div"),this.wrapperElement.className="se-offcanvas "+n.sideway+"-sideway",Object.defineProperties(this,{slipped:{get:function(){return this.hasClassName("slipped")}},sidebar:{value:new e.Container({class:"se-offcanvas-sidebar"})},content:{value:new e.Container({class:"se-offcanvas-content"})}}),this.index=-1,this.sidebar.appendTo(this.wrapperElement),this.content.appendTo(this.wrapperElement)}appendChild(e){return this.sidebar.appendChild(e),this.index<0&&(this.index=this.sidebar.children.length-1),this}repaint(){return this.slipped&&this.sidebar.repaint(),this.content.repaint(),this}slideIn(e){let t;return this.sidebar.children.length&&(this.sidebar.children.forEach(function(e){e.hide()}),"number"==typeof e&&(this.index=e),t=this.sidebar.children[this.index].show()),this.toggleClassName("slipped",!0),this.dispatchEvent("slideIn",t)}slideOut(e){return"number"==typeof e&&(this.index=e),this.toggleClassName("slipped",!1),this.dispatchEvent("slideOut")}}}(StyledElements,StyledElements.Utils),function(e,t){"use strict";e.InputElement=class extends e.StyledElement{constructor(e,t){super(t),this.inputElement=null,this.defaultValue=e}get value(){return this.getValue()}set value(e){return this.setValue(e)}getValue(){return this.inputElement.value}setValue(e){const t=this.inputElement.value;return this.inputElement.value=e,"change"in this.events&&e!==t&&this.dispatchEvent("change"),this}reset(){return this.setValue(this.defaultValue)}enable(){return StyledElements.StyledElement.prototype.enable.call(this),this.inputElement.disabled=!1,this}disable(){return StyledElements.StyledElement.prototype.disable.call(this),this.inputElement.disabled=!0,this}blur(){return this.inputElement.blur(),this}focus(){return this.inputElement.focus(),this}}}(StyledElements,StyledElements.Utils),function(e,t){"use strict";const n=new WeakMap;StyledElements.CommandQueue=class extends e.ObjectWithEvents{constructor(e,t){if("function"!=typeof t)throw new TypeError("callback parameter must be a function");super(["start","stop"]),n.set(this,{callback:t,context:e,elements:[],running:!1}),Object.defineProperties(this,{callback:{value:t},context:{value:e}})}addCommand(e){if(void 0===e)return Promise.resolve();const t=n.get(this),s=new Promise(function(n,s){t.elements.push({command:e,resolve:n,reject:s})});return t.running||(t.running=!0,this.dispatchEvent("start"),function e(t){const n=t.elements.shift();if(void 0===n)return t.running=!1,void this.dispatchEvent("stop");let s;try{s=t.callback(t.context,n.command)}catch(s){n.reject(s),e.call(this,t)}null!=s&&"function"==typeof s.then?s.then(s=>{n.resolve(s),e.call(this,t)},s=>{n.reject(s),e.call(this,t)}):(n.resolve(s),e.call(this,t))}.call(this,t)),s}get running(){return n.get(this).running}}}(StyledElements,StyledElements.Utils),function(e,t){"use strict";const n=new WeakMap,s={class:"",id:"",tagname:"div",useFullHeight:!1},i=function(t){const s=n.get(this);if(t instanceof e.StyledElement){-1===s.children.indexOf(t)&&s.children.push(t)}},l=function(){const e=[],t=n.get(this);Array.prototype.forEach.call(this.get().childNodes,function(n){for(let s=0;s<t.children.length;s++)if(t.children[s].get()===n)return void e.push(t.children.splice(s,1)[0])}),t.children=e};e.Container=class extends e.StyledElement{constructor(e,i){e=t.merge({},s,e),super(i),this.wrapperElement=document.createElement(e.tagname),this.wrapperElement.className="se-container",e.id&&this.wrapperElement.setAttribute("id",e.id),this.addClassName(e.class);const l={children:[]};n.set(this,l),Object.defineProperties(this,{children:{get:function(){return l.children.slice(0)}}})}has(t){const s=n.get(this);return t instanceof e.StyledElement&&-1!==s.children.indexOf(t)||t.parentElement===this.get()}appendChild(e,n){return t.appendChild(this,e,n).forEach(i,this),l.call(this),this}prependChild(e,n){return t.prependChild(this,e,n).forEach(i,this),l.call(this),this}removeChild(s){if(t.removeChild(this,s),s instanceof e.StyledElement){const e=n.get(this);e.children.splice(e.children.indexOf(s),1)}return this}repaint(e){e=void 0!==e&&e,n.get(this).children.forEach(t=>{t.repaint(e)})}clear(){const e=n.get(this);return e.children=[],this.wrapperElement.innerHTML="",this.wrapperElement.scrollTop=0,this.wrapperElement.scrollLeft=0,null!=e.disabledLayer&&this.wrapperElement.appendChild(e.disabledLayer),this}text(e){return null==e?this.get().textContent:this.clear().appendChild(""+e)}isDisabled(){return!this.enabled}_onenabled(e){const t=n.get(this);if(e)null!=t.disabledLayer&&t.disabledLayer.remove(),t.disabledLayer=null;else{t.disabledLayer=document.createElement("div"),t.disabledLayer.className="se-container-disable-layer";const e=document.createElement("i");e.className="disable-icon fas fa-spin fa-spinner",t.disabledLayer.appendChild(e),this.wrapperElement.appendChild(t.disabledLayer)}}}}(StyledElements,StyledElements.Utils),function(e,t){"use strict";const n={class:"",exclusive:!0,full:!0};e.Accordion=class extends e.StyledElement{constructor(e){super(),e=t.merge({},n,e),this.exclusive=e.exclusive,this.full=e.full,this.children=[],this.wrapperElement=document.createElement("div"),this.wrapperElement.className=StyledElements.Utils.appendWord(e.class,"styled_accordion")}createContainer(e){e=t.merge({listenOnTitle:!0},e);const n=new StyledElements.Expander(e);return n.insertInto(this.wrapperElement),this.exclusive?n.addEventListener("expandChange",(e,t)=>{if(t){const t=this.currentContainer;this.currentContainer=e,t&&(t.setExpanded(!1),t.wrapperElement.style.height="")}else this.currentContainer===e&&(e.wrapperElement.style.height="",this.currentContainer=null);this.repaint()}):this.full&&n.addEventListener("expandChange",e=>{this.repaint()}),this.children.push(n),null==this.currentContainer&&n.setExpanded(!0),n}repaint(e){let t=this._getUsableHeight();if(null==t||null==this.currentContainer)return;for(let e=0;e<this.children.length;e+=1){if(this.children[e]===this.currentContainer)continue;const n=document.defaultView.getComputedStyle(this.currentContainer.wrapperElement,null);t-=this.children[e].wrapperElement.offsetHeight,t-=n.getPropertyCSSValue("margin-top").getFloatValue(CSSPrimitiveValue.CSS_PX),t-=n.getPropertyCSSValue("margin-bottom").getFloatValue(CSSPrimitiveValue.CSS_PX)}const n=document.defaultView.getComputedStyle(this.currentContainer.wrapperElement,null);t-=n.getPropertyCSSValue("margin-top").getFloatValue(CSSPrimitiveValue.CSS_PX),t-=n.getPropertyCSSValue("margin-bottom").getFloatValue(CSSPrimitiveValue.CSS_PX),t-=n.getPropertyCSSValue("padding-top").getFloatValue(CSSPrimitiveValue.CSS_PX),t-=n.getPropertyCSSValue("padding-bottom").getFloatValue(CSSPrimitiveValue.CSS_PX),t-=n.getPropertyCSSValue("border-top-width").getFloatValue(CSSPrimitiveValue.CSS_PX),t-=n.getPropertyCSSValue("border-bottom-width").getFloatValue(CSSPrimitiveValue.CSS_PX),this.currentContainer.wrapperElement.style.height=t+"px",this.currentContainer.repaint(e)}destroy(){this.children.forEach(e=>{e.destroy()}),this.children=null,super.destroy()}}}(StyledElements,StyledElements.Utils),function(e,t){"use strict";const n={buttonFloat:"left",class:"",expandButton:!0,listenOnTitle:!1,state:"default",title:null};Object.freeze(n),e.Expander=class extends e.StyledElement{constructor(e){if(!(e=t.merge({},n,e)).expandButton&&!e.listenOnTitle)throw new TypeError("at least one of the expandButton or the listenOnTitle options has to be used");super(["expandChange"]),this.wrapperElement=document.createElement("div"),this.wrapperElement.className=t.appendWord("panel se-expander",e.class),null!=e.state&&""!==e.state.trim()&&this.addClassName("panel-"+e.state);const s=document.createElement("div");s.className="panel-heading",this.wrapperElement.appendChild(s),this.toggleButton=null,e.expandButton&&(this.toggleButton=new StyledElements.ToggleButton({class:"icon-expand",iconClass:"fas",plain:!0}),this.toggleButton.insertInto(s)),this.titleContainer=new StyledElements.Container({class:"title"}),this.titleContainer.insertInto(s),e.title&&this.titleContainer.appendChild(document.createTextNode(e.title)),this.contentContainer=new StyledElements.Container({class:"panel-body"}),this.contentContainer.insertInto(this.wrapperElement);const i=function(){this.setExpanded(!this.isExpanded())}.bind(this);this.toggleButton&&this.toggleButton.addEventListener("click",i),e.listenOnTitle&&(s.style.cursor="pointer",s.addEventListener("click",i,!1))}repaint(e){let t,n;if(this.isExpanded()){if(null==(t=this.wrapperElement.clientHeight))return;n=document.defaultView.getComputedStyle(this.titleContainer.wrapperElement,null),t-=this.titleContainer.wrapperElement.offsetHeight,t-=n.getPropertyCSSValue("margin-top").getFloatValue(CSSPrimitiveValue.CSS_PX),t-=n.getPropertyCSSValue("margin-bottom").getFloatValue(CSSPrimitiveValue.CSS_PX),t-=(n=document.defaultView.getComputedStyle(this.contentContainer.wrapperElement,null)).getPropertyCSSValue("border-top-width").getFloatValue(CSSPrimitiveValue.CSS_PX),t-=n.getPropertyCSSValue("border-bottom-width").getFloatValue(CSSPrimitiveValue.CSS_PX),t-=n.getPropertyCSSValue("padding-top").getFloatValue(CSSPrimitiveValue.CSS_PX),(t-=n.getPropertyCSSValue("padding-bottom").getFloatValue(CSSPrimitiveValue.CSS_PX))<0&&(t=0),this.contentContainer.wrapperElement.style.height=t+"px",this.contentContainer.repaint(e)}}isExpanded(){return this.hasClassName("expanded")}setExpanded(e){e=!!e,this.isExpanded()!==e&&(e?this.addClassName("expanded"):(this.removeClassName("expanded"),this.contentContainer.wrapperElement.style.height=""),this.toggleButton&&(this.toggleButton.active=e),this.dispatchEvent("expandChange",e))}getTitleContainer(){return this.titleContainer}appendChild(e){this.contentContainer.appendChild(e)}removeChild(e){this.contentContainer.removeChild(e)}clear(){this.contentContainer.clear()}}}(StyledElements,StyledElements.Utils),function(e,t){"use strict";e.Fragment=class extends e.StyledElement{constructor(e){super(),this.children=[],Array.isArray(e)?e.forEach(function(e){this.appendChild(e)}.bind(this)):this.appendChild(e),Object.defineProperties(this,{elements:{get:function(){return this.children}}})}appendChild(t){return null==t?this:("string"==typeof t?this.children=this.children.concat(function(e){let t,n=[];return e.length&&((t=document.createElement("div")).innerHTML=e,n=Array.prototype.slice.call(t.childNodes)),n}(t)):t instanceof e.Fragment?this.children=this.children.concat(t.children):this.children.push(t),this)}appendTo(e,n){return this.children.forEach(function(s){t.appendChild(e,s,n)}),this}repaint(){return this.children.forEach(function(e){"function"==typeof e.repaint&&e.repaint()}),this}}}(StyledElements,StyledElements.Utils),function(e,t){"use strict";const n=new WeakMap,s=function(e,t){const s=n.get(this);"function"==typeof s.options.processFunc&&s.options.processFunc(e,t),s.currentPage=parseInt(t.current_page,10),s.currentElements=e,s.totalCount!==t.total_count&&(s.totalCount=t.total_count,l.call(this),this.dispatchEvent("paginationChanged")),this.dispatchEvent("requestEnd")},i=function(e){n.get(this).currentElements=[],null==e&&(e={message:"unknown cause"}),this.dispatchEvent("requestEnd",e)},l=function(){const e=n.get(this);0===e.options.pageSize?e.totalPages=1:(e.totalPages=Math.ceil(e.totalCount/e.options.pageSize),e.totalPages<=0&&(e.totalPages=1))};e.PaginatedSource=class extends e.ObjectWithEvents{constructor(e){super(["optionsChanged","paginationChanged","requestStart","requestEnd"]);const s={};if(n.set(this,s),"function"!=typeof e.requestFunc)throw new TypeError("requestFunc must be a function");e.requestFunc=e.requestFunc.bind(this),Object.defineProperties(this,{currentPage:{get:function(){return s.currentPage}},options:{get:function(){return s.options}},totalCount:{get:function(){return s.totalCount}},totalPages:{get:function(){return s.totalPages}},currentElements:{get:function(){return s.currentElements}}}),s.options=t.merge({pageSize:25,requestFunc:null,processFunc:null},e),s.currentPage=1,s.currentElements=[],s.totalPages=1}getCurrentPage(){return this.currentElements}changeOptions(e){let t,s,i,r=!1;const a=n.get(this);if("object"==typeof e){for(i in e)"pageSize"===i?(t=parseInt(e.pageSize,10),isNaN(t)||t===a.options.pageSize||(r=!0,s=(a.currentPage-1)*a.options.pageSize,a.currentPage=Math.floor(s/t)+1,a.options.pageSize=t,l.call(this))):(r=!0,a.options[i]=e[i],a.currentPage=1);return r&&(this.dispatchEvent("optionsChanged",a.options),this.refresh()),this}}goToFirst(){return this.changePage(0)}goToPrevious(){const e=n.get(this);return this.changePage(e.currentPage-1)}goToNext(){const e=n.get(this);return this.changePage(e.currentPage+1)}goToLast(){const e=n.get(this);this.changePage(e.totalPages)}refresh(){const e=n.get(this);this.dispatchEvent("requestStart"),e.options.requestFunc(e.currentPage,e.options,s.bind(this),i.bind(this))}changePage(e){const t=n.get(this);e<1?e=1:e>t.totalPages&&(e=t.totalPages),this.dispatchEvent("requestStart"),t.options.requestFunc(e,t.options,s.bind(this),i.bind(this))}}}(StyledElements,StyledElements.Utils),function(e,t){"use strict";const n="http://wirecloud.conwet.fi.upm.es/StyledElements",s=function(e){const t={};for(let n=0;n<e.attributes.length;n++)t[e.attributes[n].localName]=e.attributes[n].nodeValue;return t},i=function(e,n,i){let r;const a=n[e.localName];if("function"==typeof a){const o=l(e);t.merge(o,s(e)),r=a(o,n,i)}else r=a;return r=r instanceof StyledElements.StyledElement||t.isElement(r)?r:null!=r?e.ownerDocument.createTextNode(r):e.ownerDocument.createTextNode("")},l=function(e){let t={};for(let n=0;n<e.childNodes.length;n++){const s=e.childNodes[n];if(s.nodeType===Node.TEXT_NODE&&!/^\s*$/.test(s.nodeValue)){try{t=JSON.parse(s.nodeValue)}catch(e){t={}}e.removeChild(s);break}}return t},r=function(e,t,n,s,i){if(n.childNodes.length>0&&(a(t,n,s,i),e!==n)){if(e instanceof StyledElements.StyledElement&&(e=e.get()),"function"!=typeof e.appendChild)return;let t=null;for(;null!==n.firstChild&&t!==n.firstChild;)t=n.firstChild,e.appendChild(n.firstChild)}},a=function e(t,s,l,a){let o,u,c,h;for(o=0;o<s.childNodes.length;o+=1)(u=s.childNodes[o]).nodeType===Node.ELEMENT_NODE&&(u.namespaceURI===n?((c=t.build(u,l,a)).insertInto(s,u),s.removeChild(u)):"http://wirecloud.conwet.fi.upm.es/Template"===u.namespaceURI?((h=i(u,l,a))instanceof StyledElements.StyledElement?h.insertInto(s,u):s.insertBefore(h,u),s.removeChild(u),r(h,t,u,l,a)):e(t,u,l,a))},o=function(e,t,s,l){const o=Array.prototype.slice.call(t.childNodes,0);for(let t=0;t<o.length;t+=1){const u=o[t];if(u instanceof Element)if(u.namespaceURI===n){const n=e.build(u,s,l);o[t]=n}else"http://wirecloud.conwet.fi.upm.es/Template"===u.namespaceURI?(o[t]=i(u,s,l),r(o[t],e,u,s,l)):a(e,u,s,l)}return new StyledElements.Fragment(o)},u=function(e){let t={};const s=e.ownerDocument.evaluate("s:options",e,function(){return n},XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue;if(null!=s){s.parentNode.removeChild(s);try{t=JSON.parse(s.textContent)}catch(e){}}return t},c=function(e,i,l,r,a,c){const h=i.getElementsByTagNameNS(n,l)[0];if(null!=h){const n=t.merge(u(h),s(h));null!=n&&"class"in n&&r.addClassName(n.class);const i=o(e,h,a,c);r.appendChild(i)}};e.GUIBuilder=class{constructor(){const e={borderlayout:function(e,t,n,s,i){const l=new StyledElements.BorderLayout(n);return c(e,t,"northcontainer",l.north,s,i),c(e,t,"westcontainer",l.west,s,i),c(e,t,"centercontainer",l.center,s,i),c(e,t,"eastcontainer",l.east,s,i),c(e,t,"southcontainer",l.south,s,i),l},button:function(e,n,s){return(s=t.merge({},s)).text=n.textContent,new StyledElements.Button(s)},horizontallayout:function(e,t,n,s,i){const l=new StyledElements.HorizontalLayout(n);return c(e,t,"westcontainer",l.west,s,i),c(e,t,"centercontainer",l.center,s,i),c(e,t,"eastcontainer",l.east,s,i),l},select:function(e,t,n){return new StyledElements.Select(n)},verticallayout:function(e,t,n,s,i){const l=new StyledElements.VerticalLayout(n);return c(e,t,"northcontainer",l.north,s,i),c(e,t,"centercontainer",l.center,s,i),c(e,t,"southcontainer",l.south,s,i),l}};this.build=function(n,i,l){return(0,e[n.localName])(this,n,t.merge(u(n),s(n)),i,l)}}parse(e,t,n){let s;if("string"==typeof e&&(e=(s=new DOMParser).parseFromString(e,"application/xml")),!(e instanceof Document))throw new TypeError("document is not a Document or cannot be parsed into a Document");return o(this,e.documentElement,t,n)}},e.GUIBuilder.prototype.DEFAULT_OPENING='<s:styledgui xmlns:s="http://wirecloud.conwet.fi.upm.es/StyledElements" xmlns:t="http://wirecloud.conwet.fi.upm.es/Template" xmlns="http://www.w3.org/1999/xhtml">',e.GUIBuilder.prototype.DEFAULT_CLOSING="</s:styledgui>"}(StyledElements,StyledElements.Utils),function(e,t){"use strict";const n=new WeakMap,s=new e.GUIBuilder,i=function(e,t,n){switch(e.classList.remove("se-tooltip-top","se-tooltip-right","se-tooltip-bottom","se-tooltip-left"),n){case"top":e.classList.add("se-tooltip-top"),e.style.left=t.left+(t.width-e.offsetWidth)/2+"px",e.style.top=t.top-e.offsetHeight+"px";break;case"right":e.classList.add("se-tooltip-right"),e.style.left=t.right+"px",e.style.top=t.top+(t.height-e.offsetHeight)/2+"px";break;case"bottom":e.classList.add("se-tooltip-bottom"),e.style.left=t.left+(t.width-e.offsetWidth)/2+"px",e.style.top=t.bottom+"px";break;case"left":e.classList.add("se-tooltip-left"),e.style.left=t.left-e.offsetWidth+"px",e.style.top=t.top+(t.height-e.offsetHeight)/2+"px"}},l=function(e){const t=e.parentElement.getBoundingClientRect(),n=e.getBoundingClientRect(),s=n.width-Math.max(n.right-t.right,0)-Math.max(t.left-n.left,0),i=n.height-Math.max(n.bottom-t.bottom,0)-Math.max(t.top-n.top,0);return n.width*n.height-s*i},r={bottom:["left","right","top","bottom"],left:["right","top","bottom","left"],right:["left","top","bottom","right"],top:["left","right","bottom","top"]},a=function(e,t){const s=n.get(this),a=[];let o=0;"getBoundingClientRect"in e&&(e=e.getBoundingClientRect());do{i(s.element,e,t[o]),a.push(l(s.element)),o+=1}while(a[o-1]>0&&o<t.length);a[o-1]>0&&function(e,t,n,s){const l=Math.min.apply(Math,n),a=s[n.indexOf(l)];i(e,t,a);const o=e.parentElement.getBoundingClientRect();let u=e.getBoundingClientRect();r[a].forEach(t=>{(("top"===t||"left"===t)&&u[t]<o[t]||("bottom"===t||"right"===t)&&u[t]>o[t])&&(e.style[t]="10px",u=e.getBoundingClientRect())})}(s.element,e,a,t)},o=function(){const e=n.get(this);null==e.element||e.element.classList.contains("in")||(e.element.remove(),e.element=null,"Wirecloud"in window&&Wirecloud.UserInterfaceManager._unregisterTooltip(this))};e.Tooltip=class extends e.StyledElement{constructor(e){super([]);const s={element:null};n.set(this,s),Object.defineProperties(this,{options:{value:t.merge({content:"",class:"",placement:["right","bottom","left","top"]},e)},visible:{get:function(){return null!=s.element}}})}destroy(){this.hide()}bind(e){e.addEventListener("focus",this.show.bind(this,e),!1),e.addEventListener("blur",this.hide.bind(this),!1),e.addEventListener("mouseenter",this.show.bind(this,e),!1),e.addEventListener("mouseleave",this.hide.bind(this),!1),e.addEventListener("click",this.hide.bind(this),!1)}toggle(e){return this.visible?this.hide():this.show(e)}show(e){const i=n.get(this);return"Wirecloud"in window&&Wirecloud.UserInterfaceManager._registerTooltip(this),this.visible?(i.element.classList.add("in"),this.repaint()):(i.element=s.parse('<s:styledgui xmlns:s="http://wirecloud.conwet.fi.upm.es/StyledElements" xmlns:t="http://wirecloud.conwet.fi.upm.es/Template" xmlns="http://www.w3.org/1999/xhtml"><div class="se-tooltip fade" role="tooltip"><div class="se-tooltip-arrow"></div><div class="se-tooltip-inner"><t:content/></div></div></s:styledgui>',{content:this.options.content}).elements[0],i.element.addEventListener("transitionend",o.bind(this)),(t.getFullscreenElement()||document.body).appendChild(i.element),a.call(this,e,this.options.placement),i.element.classList.add("in"),this)}hide(){if(!this.visible)return this;const e=n.get(this),t=!e.element.classList.contains("in")||"0"===getComputedStyle(e.element).getPropertyValue("opacity");return e.element.classList.remove("in"),t&&o.call(this),this}}}(StyledElements,StyledElements.Utils),function(e,t){"use strict";const n={state:"warning",alignment:"",class:"",title:"",message:""};Object.freeze(n),e.Alert=class extends e.StyledElement{constructor(s){s=t.merge({},n,s),super(),this.wrapperElement=document.createElement("div"),this.wrapperElement.className="alert",null!=s.state&&""!==s.state.trim()&&this.addClassName("alert-"+s.state),s.alignment&&this.addClassName("se-alert-"+s.alignment),this.addClassName(s.class);const i=new e.Container({class:"se-alert-heading"});i.appendChild(s.title).insertInto(this.wrapperElement);const l=new e.Container({class:"se-alert-body"});l.appendChild(s.message).insertInto(this.wrapperElement),Object.defineProperties(this,{heading:{value:i},body:{value:l}})}addNote(e){const t=document.createElement("blockquote");return e instanceof StyledElements.StyledElement?e.appendTo(t):t.innerHTML=e,this.body.appendChild(t),t}}}(StyledElements,StyledElements.Utils),function(e,t){"use strict";const n=new WeakMap;e.Addon=class extends e.Container{constructor(e){e=t.merge({},{text:null,title:"",class:""},e),super([]),this.wrapperElement=document.createElement("span"),this.wrapperElement.className="se-add-on",this.addClassName(e.class),n.set(this,{related_input:null}),this.setTitle(e.title),this.setLabel(e.text),this._clickCallback=function(e){e.preventDefault(),e.stopPropagation();const t=n.get(this);this.enabled&&t.related_input&&t.related_input.focus()}.bind(this),this.wrapperElement.addEventListener("mousedown",t.stopPropagationListener,!0),this.wrapperElement.addEventListener("click",this._clickCallback,!0)}setLabel(e){return this.wrapperElement.textContent=e,this}setTitle(e){const t=n.get(this);return null==e||""===e?null!=t.tooltip&&(t.tooltip.destroy(),t.tooltip=null):(null==t.tooltip&&(t.tooltip=new this.Tooltip({content:e,placement:["bottom","top","right","left"]}),t.tooltip.bind(this.wrapperElement)),t.tooltip.options.content=e),this}assignInput(e){return n.get(this).related_input=e,this}destroy(){this.wrapperElement.removeEventListener("mousedown",t.stopPropagationListener,!0),this.wrapperElement.removeEventListener("click",this._clickCallback,!0),delete this._clickCallback,super.destroy()}},e.Addon.prototype.Tooltip=e.Tooltip}(StyledElements,StyledElements.Utils),function(e,t){"use strict";const n={id:"",class:"",iconClass:"",stackedIconClass:"",state:"",plain:!1,usedInForm:!1,text:"",depth:null,title:"",stackedIconPlacement:"bottom-right",tabindex:0};Object.freeze(n);const s=function(){this.enabled?this.wrapperElement.setAttribute("tabindex",this.tabindex):this.wrapperElement.setAttribute("tabindex",-1)};e.Button=class extends e.StyledElement{constructor(e){let i,l,r;e=t.merge(t.clone(n),e),super(["blur","click","dblclick","focus","mouseenter","mouseleave"]),e.usedInForm?(this.wrapperElement=document.createElement("button"),this.wrapperElement.setAttribute("type","button")):this.wrapperElement=document.createElement("div"),this.wrapperElement.className="se-btn",this.label=null,this.icon=null,this.badgeElement=null,this.tooltip=null,this.addClassName(e.class),""!==e.id.trim()&&this.wrapperElement.setAttribute("id",e.id),e.plain&&this.addClassName("plain"),this.addIconClassName(e.iconClass),this.setLabel(e.text),this.setTitle(e.title),e.iconClass&&e.stackedIconClass&&(this.stackedIcon=document.createElement("span"),this.stackedIcon.className=[e.stackedIconClass,"se-stacked-icon",e.stackedIconPlacement].join(" "),this.icon.appendChild(this.stackedIcon)),Object.defineProperties(this,{depth:{get:function(){return r},set:function(e){r=function(e,t){return"number"==typeof t&&t>=0&&t<=5?t!==e&&(e>=0&&this.removeClassName("z-depth-"+e),e=t,this.addClassName("z-depth-"+e)):(null!=e&&this.removeClassName("z-depth-"+e),e=null),e}.call(this,r,e)}},state:{get:function(){return function(e){return e}.call(this,l)},set:function(e){l=function(e,t){return-1!==["default","primary","success","info","warning","danger"].indexOf(t)?t!==e&&(e&&this.removeClassName("btn-"+e),e=t,this.addClassName("btn-"+e)):(e&&this.removeClassName("btn-"+e),e=""),e}.call(this,l,e)}},tabindex:{get:function(){return i},set:function(e){i=e,s.call(this)}}}),this.state=e.state,this.depth=e.depth,this.tabindex=e.tabindex;const a=Object.getPrototypeOf(this);"function"==typeof a._clickCallback?this._clickCallback=a._clickCallback.bind(this):this._clickCallback=function(e){null!=this.inputElement&&e.target===this.inputElement||(e.preventDefault(),e.stopPropagation(),this.enabled&&(null!=this.inputElement&&this.inputElement.click(),this.dispatchEvent("click")))}.bind(this),this._onkeydown_bound=function(e){if(this.enabled){const n=t.extractModifiers(e);n.preventDefault=e.preventDefault.bind(e),n.stopPropagation=e.stopPropagation.bind(e),this._onkeydown(n,t.normalizeKey(e))}}.bind(this),this.wrapperElement.addEventListener("touchstart",StyledElements.Utils.stopPropagationListener,!0),this.wrapperElement.addEventListener("mousedown",StyledElements.Utils.stopPropagationListener,!0),this.wrapperElement.addEventListener("click",this._clickCallback,!1),this.wrapperElement.addEventListener("dblclick",function(e){e.preventDefault(),e.stopPropagation(),this.enabled&&this.dispatchEvent("dblclick")}.bind(this),!0),this.wrapperElement.addEventListener("keydown",this._onkeydown_bound,!1),this.wrapperElement.addEventListener("focus",function(){this.dispatchEvent("focus")}.bind(this),!0),this.wrapperElement.addEventListener("blur",function(){this.dispatchEvent("blur")}.bind(this),!0),this.wrapperElement.addEventListener("mouseenter",function(){this.dispatchEvent("mouseenter")}.bind(this),!1),this.wrapperElement.addEventListener("mouseleave",function(){this.dispatchEvent("mouseleave")}.bind(this),!1)}_onenabled(e){return s.call(this),e||this.blur(),this}_onkeydown(e,t){switch(t){case" ":case"Enter":this._clickCallback(e)}}focus(){return this.wrapperElement.focus(),this}blur(){return this.wrapperElement.blur(),this}setLabel(e){return e?function(e){return null==this.label&&(this.label=document.createElement("span"),this.wrapperElement.appendChild(this.label)),this.label.textContent=e,this}.call(this,e):function(){return null!=this.label&&(this.label.remove(),this.label=null),this}.call(this)}hasIconClassName(e){return e=null==e?"":e.toString().trim(),null!=this.icon&&this.icon.classList.contains(e)}addIconClassName(e){if(!Array.isArray(e)){if(""===(e=null==e?"":e.toString().trim()))return this;e=e.split(/\s+/)}return 0===e.length?this:(null==this.icon&&(this.icon=document.createElement("i"),this.icon.classList.add("se-icon"),this.wrapperElement.appendChild(this.icon)),e.forEach(function(e){this.icon.classList.add(e)},this),this)}removeIconClassName(e){if(null==this.icon)return this;if(!Array.isArray(e)){if(""===(e=null==e?"":e.toString().trim()))return this.icon.remove(),this.icon=null,this;e=e.split(/\s+/)}return e.forEach(function(e){this.icon.classList.remove(e)},this),"se-icon"===this.icon.className.trim()&&(this.icon.remove(),this.icon=null),this}replaceIconClassName(e,t){return this.removeIconClassName(e),this.addIconClassName(t)}setTitle(e){return null==e||""===e?null!=this.tooltip&&(this.tooltip.destroy(),this.tooltip=null):(null==this.tooltip&&(this.tooltip=new this.Tooltip({content:e,placement:["bottom","top","right","left"]}),this.tooltip.bind(this)),this.tooltip.options.content=e),this}click(){return this.enabled&&this.dispatchEvent("click"),this}destroy(){this.wrapperElement.removeEventListener("touchstart",StyledElements.Utils.stopPropagationListener,!0),this.wrapperElement.removeEventListener("mousedown",StyledElements.Utils.stopPropagationListener,!0),this.wrapperElement.removeEventListener("click",this._clickCallback,!0),this.wrapperElement.removeEventListener("keydown",this._onkeydown_bound,!1),delete this._clickCallback,delete this._onkeydown_bound,StyledElements.StyledElement.prototype.destroy.call(this)}setBadge(e,t,n){return e?function(e,t,n){return null==this.badgeElement&&(this.badgeElement=document.createElement("span"),this.wrapperElement.insertBefore(this.badgeElement,this.wrapperElement.firstChild)),this.badgeElement.className="badge",-1!==["inverse","primary","success","info","warning","danger"].indexOf(t)&&this.badgeElement.classList.add("badge-"+t),this.badgeElement.classList.add("z-depth-"+(this.depth+1)),this.toggleClassName("has-alert",n),this.badgeElement.textContent=e,this}.call(this,e,t,!!n):function(){return null!=this.badgeElement&&(this.badgeElement.remove(),this.badgeElement=null),this.removeClassName("has-alert"),this}.call(this)}},e.Button.prototype.Tooltip=StyledElements.Tooltip}(StyledElements,StyledElements.Utils),function(e,t){"use strict";e.FileButton=class extends e.Button{constructor(e){super(e=t.merge({multiple:!0},e)),Object.defineProperty(this,"inputElement",{value:document.createElement("input")}),this.inputElement.setAttribute("type","file"),this.inputElement.setAttribute("tabindex","-1"),this.inputElement.multiple=e.multiple,this.wrapperElement.appendChild(this.inputElement),this.events.fileselect=new StyledElements.Event,this._onchange=function(){this.inputElement.files&&(this.dispatchEvent("fileselect",this.inputElement.files),this.inputElement.value="")}.bind(this),this.inputElement.addEventListener("change",this._onchange,!0)}destroy(){this.inputElement.removeEventListener("change",this._onchange,!0),delete this._onchange,super.destroy()}}}(StyledElements,StyledElements.Utils),function(e,t){"use strict";const n=["se-popup-menu-left-bottom","se-popup-menu-right-bottom","se-popup-menu-top-left","se-popup-menu-top-right","se-popup-menu-bottom-right","se-popup-menu-bottom-left"];Object.freeze(n);const s=["bottom-left","bottom-right","top-left","top-right"];Object.freeze(s);const i=function(e,t){switch(this.wrapperElement.classList.remove.apply(this.wrapperElement.classList,n),this.wrapperElement.style.top="",this.wrapperElement.style.left="",this.wrapperElement.style.bottom="",this.wrapperElement.style.right="",this.wrapperElement.classList.add("se-popup-menu-"+t),t){case"left-bottom":this.wrapperElement.style.left=e.left-this.wrapperElement.offsetWidth+1+"px",this.wrapperElement.style.top=e.top-1+"px";break;case"right-bottom":this.wrapperElement.style.left=e.right-1+"px",this.wrapperElement.style.top=e.top-1+"px";break;case"top-left":this.wrapperElement.style.bottom=this.wrapperElement.parentElement.offsetHeight-e.top-1+"px",this.wrapperElement.style.left=e.left+"px";break;case"top-right":this.wrapperElement.style.top=e.top-this.wrapperElement.offsetHeight+1+"px",this.wrapperElement.style.left=e.right-this.wrapperElement.offsetWidth+"px";break;case"bottom-right":this.wrapperElement.style.top=e.bottom-1+"px",this.wrapperElement.style.left=e.right-this.wrapperElement.offsetWidth+"px";break;case"bottom-left":this.wrapperElement.style.top=e.bottom-1+"px",this.wrapperElement.style.left=e.left+"px"}},l=function(){const e=this.wrapperElement.parentElement.getBoundingClientRect(),t=this.wrapperElement.getBoundingClientRect(),n=t.width-Math.max(t.right-e.right,0)-Math.max(e.left-t.left,0),s=t.height-Math.max(t.bottom-e.bottom,0)-Math.max(e.top-t.top,0);return t.width*t.height-n*s},r={bottom:["left","right","top","bottom"],left:["right","top","bottom","left"],right:["left","top","bottom","right"],top:["left","right","bottom","top"]},a=function(e,t){if(e instanceof StyledElements.MenuItem)e.addEventListener("click",this._menuItemCallback),e.addEventListener("mouseenter",this._menuItem_onmouseenter_bound),e.addEventListener("mouseleave",this._menuItem_onmouseleave_bound),e.addEventListener("focus",this._menuItem_onfocus_bound),e.addEventListener("blur",this._menuItem_onblur_bound);else if(e instanceof StyledElements.SubMenuItem)e.addEventListener("click",this._menuItemCallback),e.menuitem.addEventListener("mouseenter",this._menuItem_onmouseenter_bound),e.menuitem.addEventListener("mouseleave",this._menuItem_onmouseleave_bound),e.menuitem.addEventListener("focus",this._menuItem_onfocus_bound),e.menuitem.addEventListener("blur",this._menuItem_onblur_bound),e._setParentPopupMenu(this);else if(!(e instanceof StyledElements.DynamicMenuItems||e instanceof StyledElements.Separator))throw null!=e?new TypeError("Invalid chlid element"):new TypeError("child parameter cannot be null");t.push(e)},o=function(e){let t,n,s;if(e instanceof StyledElements.DynamicMenuItems)for(n=e.build(this._context),t=0;t<n.length;t+=1)s=n[t],a.call(this,s,this._dynamicItems),s instanceof StyledElements.MenuItem||s instanceof StyledElements.Separator?(s.insertInto(this.wrapperElement),s.parentElement=this,s instanceof StyledElements.MenuItem&&s.enabled&&this._enabledItems.push(s)):(s.menuitem.insertInto(this.wrapperElement).parentElement=this,this._enabledItems.push(s.menuitem));else e instanceof StyledElements.MenuItem||e instanceof StyledElements.Separator?(e.insertInto(this.wrapperElement),e.parentElement=this,e instanceof StyledElements.MenuItem&&e.enabled&&this._enabledItems.push(e)):(e.menuitem.insertInto(this.wrapperElement).parentElement=this,this._submenus.push(e),this._enabledItems.push(e.menuitem))},u=function(e,t){if(!("left"in e)&&"x"in e&&"y"in e)return this.wrapperElement.classList.remove.apply(this.wrapperElement.classList,n),this.wrapperElement.style.top=e.y+"px",void(this.wrapperElement.style.left=e.x+"px");"getBoundingClientRect"in e&&(e=e.getBoundingClientRect());let s=0;const a=[];do{i.call(this,e,t[s]),a.push(l.call(this)),s+=1}while(a[s-1]>0&&s<t.length);a[s-1]>0&&function(e,t,n){const s=Math.min.apply(Math,t),l=n[t.indexOf(s)];i.call(this,e,l);const a=this.wrapperElement.parentElement.getBoundingClientRect(),o=this.wrapperElement.getBoundingClientRect();r[l.split("-")[0]].forEach(e=>{(("top"===e||"left"===e)&&o[e]<a[e]||("bottom"===e||"right"===e)&&o[e]>a[e])&&(this.wrapperElement.style[e]="10px",this.wrapperElement_box=this.wrapperElement.getBoundingClientRect())})}.call(this,e,a,t)},c=function(){return this.hidden?null:this._activeMenuItem},h=function(){return this.hasEnabledItem()?this._enabledItems[0]:null},d=function(){return this.hasEnabledItem()?this._enabledItems[this._enabledItems.length-1]:null},p=function(){return null==this.wrapperElement.parentElement},m=function(e){this._activeMenuItem=e.activate(),this.dispatchEvent("itemOver",e)},E=function(){let t,n;for(t=this._submenus.length-1;t>=0;t--)this._submenus[t].hide(),this._submenus.splice(t,1);for(t=this._dynamicItems.length-1;t>=0;t--)(n=this._dynamicItems[t])instanceof e.SubMenuItem&&n.hide(),n.destroy(),this._dynamicItems.splice(t,1);this._enabledItems=[],this._activeMenuItem=null,this.wrapperElement.innerHTML=""};e.PopupMenuBase=class extends e.ObjectWithEvents{constructor(e){e=StyledElements.Utils.merge({oneActiveAtLeast:!1,placement:null,useRefElementWidth:!1},e),super(["itemOver","visibilityChange","click"]),this.wrapperElement=document.createElement("div"),this.wrapperElement.className="se-popup-menu hidden",this._context=null,Array.isArray(e.placement)?this._placement=e.placement:"string"==typeof e.placement?this._placement=[e.placement]:this._placement=s,Object.defineProperties(this,{activeItem:{get:c},firstEnabledItem:{get:h},hidden:{get:p},lastEnabledItem:{get:d},oneActiveAtLeast:{value:e.oneActiveAtLeast},useRefElementWidth:{value:e.useRefElementWidth}}),this._items=[],this._dynamicItems=[],this._submenus=[],this._menuItemCallback=this._menuItemCallback.bind(this),this._menuItem_onmouseenter_bound=function(e){this._enabledItems.forEach(e=>{e.deactivate()}),m.call(this,e)}.bind(this),this._menuItem_onmouseleave_bound=function(e){this.oneActiveAtLeast?this._activeMenuItem!==e&&e.deactivate():(this._activeMenuItem===e&&(this._activeMenuItem=null),e.deactivate())}.bind(this),this._menuItem_onfocus_bound=function(e){this._focusedMenuItem=e}.bind(this),this._menuItem_onblur_bound=function(e){this._focusedMenuItem===e&&(this._focusedMenuItem=null)}.bind(this)}append(e){return a.call(this,e,this._items),this.isVisible()&&(o.call(this,e),null==this._activeMenuItem&&this.oneActiveAtLeast&&this._enabledItems.length>0&&m.call(this,this._enabledItems[0])),this}appendSeparator(){this.append(new StyledElements.Separator)}clear(){let e;for(this.hidden||E.call(this),e=0;e<this._items.length;e++)this._items[e].removeEventListener("click",this._menuItemCallback);return this._items=[],this}setContext(e){this._context=e}_menuItemCallback(e){this.dispatchEvent("click",e),e.hasClassName("submenu")||this.hide(),"function"==typeof e.run&&e.run(this._context,e.context)}isVisible(){return!this.hidden}show(e){if(this.isVisible())return this;this._enabledItems=[],this._activeMenuItem=null,this._focusedMenuItem=null;for(let e=0;e<this._items.length;e+=1)o.call(this,this._items[e]);this._enabledItems.length>0&&this.oneActiveAtLeast&&m.call(this,this._enabledItems[0]),this.wrapperElement.classList.remove("hidden"),(t.getFullscreenElement()||document.body).appendChild(this.wrapperElement),"Wirecloud"in window&&Wirecloud.UserInterfaceManager._registerPopup(this),this.dispatchEvent("visibilityChange"),this.refPosition=e;const n="getBoundingClientRect"in e?e.getBoundingClientRect():e;return this.useRefElementWidth&&(this.wrapperElement.style.width=n.width+"px"),u.call(this,n,this._placement),this}repaint(){return this.refPosition&&u.call(this,this.refPosition,this._placement),this}moveCursorDown(){let e;return this.hasEnabledItem()?(null!=this._activeMenuItem?(this._activeMenuItem.deactivate(),(e=this._enabledItems.indexOf(this._activeMenuItem))!==this._enabledItems.length-1?this._activeMenuItem=this._enabledItems[e+1]:this._activeMenuItem=this.firstEnabledItem):this._activeMenuItem=this.firstEnabledItem,this._activeMenuItem.activate(),this.dispatchEvent("itemOver",this._activeMenuItem),this):this}moveCursorUp(){let e;return this.hasEnabledItem()?(null!=this._activeMenuItem?(this._activeMenuItem.deactivate(),e=this._enabledItems.indexOf(this._activeMenuItem),this._activeMenuItem=0!==e?this._enabledItems[e-1]:this.lastEnabledItem):this._activeMenuItem=this.lastEnabledItem,this._activeMenuItem.activate(),this.dispatchEvent("itemOver",this._activeMenuItem),this):this}moveFocusDown(){let e;return this.hasEnabledItem()?(null!=this._focusedMenuItem&&(e=this._enabledItems.indexOf(this._focusedMenuItem))!==this._enabledItems.length-1?this._enabledItems[e+1].focus():this.firstEnabledItem.focus(),this):this}moveFocusUp(){let e;return this.hasEnabledItem()?(null!=this._focusedMenuItem&&0!==(e=this._enabledItems.indexOf(this._focusedMenuItem))?this._enabledItems[e-1].focus():this.lastEnabledItem.focus(),this):this}hide(){return this.refPosition=null,this.hidden?this:(this.wrapperElement.classList.add("hidden"),this.wrapperElement.style.bottom="",E.call(this),this.wrapperElement.remove(),"Wirecloud"in window&&Wirecloud.UserInterfaceManager._unregisterPopup(this),this.dispatchEvent("visibilityChange"))}destroy(){let e,t;for(this.hide(),e=0;e<this._items.length;e+=1)(t=this._items[e])instanceof StyledElements.MenuItem&&t.destroy();return this._items=null,this._menuItemCallback=null,this._context=null,super.destroy()}hasEnabledItem(){return!this.hidden&&this._enabledItems.length>0}}}(StyledElements,StyledElements.Utils),function(e,t){"use strict";e.PopupMenu=class extends e.PopupMenuBase{constructor(e){super(e),this._disableCallback=function(e){if(0!==e.button)return;const t=this.wrapperElement.getBoundingClientRect();(e.clientX<t.left||e.clientX>t.right||e.clientY<t.top||e.clientY>t.bottom)&&setTimeout(this.hide.bind(this),0)}.bind(this)}show(e){return document.addEventListener("click",this._disableCallback,!0),super.show(e)}hide(){return super.hide(),document.removeEventListener("click",this._disableCallback,!0),document.removeEventListener("contextmenu",this._disableCallback,!0),this}destroy(){this._disableCallback=null,super.destroy()}}}(StyledElements,StyledElements.Utils),function(){"use strict";StyledElements.DynamicMenuItems=function(e){null!=e&&(this.build=e)},StyledElements.DynamicMenuItems.prototype.build=function(){return[]}}(),function(e,t){"use strict";const n=new WeakMap,s=["blur","click","focus","mouseenter","mouseleave"];e.MenuItem=class extends e.StyledElement{constructor(e,i,l){let r;super(s),this.wrapperElement=document.createElement("div"),this.wrapperElement.className="se-popup-menu-item",r=null!=i&&"object"==typeof i?i:{handler:i,context:l};const a={bodyelement:document.createElement("div"),thumbnailelement:document.createElement("div"),titleelement:document.createElement("div"),element_onclick:function(e){e.stopPropagation(),this.click()}.bind(this),element_onmouseenter:function(e){this.enabled&&this.dispatchEvent("mouseenter")}.bind(this),element_onmouseleave:function(e){this.enabled&&this.dispatchEvent("mouseleave")}.bind(this),element_onblur:function(e){this.enabled&&this.dispatchEvent("blur")}.bind(this),element_onfocus:function(e){this.enabled&&this.dispatchEvent("focus")}.bind(this),element_onkeydown:function(e){switch(t.normalizeKey(e)){case" ":case"Enter":e.preventDefault(),this.click();break;case"Escape":case"ArrowLeft":e.stopPropagation(),e.preventDefault(),this.parentElement.hide(),this.parentElement instanceof StyledElements.SubMenuItem&&this.parentElement.menuitem.focus();break;case"ArrowUp":e.preventDefault(),this.parentElement.moveFocusUp();break;case"Tab":e.preventDefault();const n="submenu"in this&&this.submenu.isVisible()?this.submenu:this.parentElement;e.shiftKey?n.moveFocusUp():n.moveFocusDown();break;case"ArrowDown":e.preventDefault(),this.parentElement.moveFocusDown();break;case"ArrowRight":e.preventDefault(),"submenu"in this&&(this.submenu.show(this.getBoundingClientRect()),this.submenu.hasEnabledItem()&&this.submenu.moveFocusDown())}}.bind(this)};n.set(this,a),a.bodyelement.className="se-popup-menu-item-body",a.thumbnailelement.className="se-popup-menu-item-thumbnail",a.titleelement.className="se-popup-menu-item-title",a.bodyelement.appendChild(a.titleelement),this.wrapperElement.appendChild(a.bodyelement),this.setTitle(e),this.run=r.handler,this.context=r.context,this.wrapperElement.addEventListener("click",a.element_onclick,!0),this.wrapperElement.addEventListener("mouseenter",a.element_onmouseenter),this.wrapperElement.addEventListener("mouseleave",a.element_onmouseleave),this.wrapperElement.addEventListener("blur",a.element_onblur),this.wrapperElement.addEventListener("focus",a.element_onfocus),this._onenabled(!0),this.wrapperElement.addEventListener("keydown",a.element_onkeydown),null!=r.enabled&&(this.enabled=r.enabled),null!=r.iconClass&&this.addIconClass(r.iconClass)}_onenabled(e){e?this.wrapperElement.setAttribute("tabindex",-1):this.wrapperElement.removeAttribute("tabindex")}activate(){return this.active=!0,this}addIconClass(e){const t=n.get(this);return null==t.iconelement&&(t.iconelement=document.createElement("span"),t.thumbnailelement.appendChild(t.iconelement)),null==t.thumbnailelement.parentElement&&this.wrapperElement.insertBefore(t.thumbnailelement,this.wrapperElement.firstChild),t.iconelement.className="se-icon "+e,this}get active(){return this.hasClassName("active")}set active(e){this.enabled&&this.active!==e&&this.toggleClassName("active",e)}deactivate(){return this.active=!1,this}destroy(){const t=n.get(this);null!=this.wrapperElement.parentElement&&this.wrapperElement.parentElement.removeChild(this.wrapperElement),this.wrapperElement.removeEventListener("click",t.element_onclick,!0),this.wrapperElement.removeEventListener("mouseenter",t.element_onmouseenter),this.wrapperElement.removeEventListener("mouseleave",t.element_onmouseleave),this.wrapperElement.removeEventListener("keydown",t.element_onkeydown),this.wrapperElement.removeEventListener("blur",t.element_onblur),this.wrapperElement.removeEventListener("focus",t.element_onfocus),this.wrapperElement.removeEventListener("keydown",t.element_onkeydown),e.StyledElement.prototype.destroy.call(this)}focus(){return this.enabled&&!this.hasFocus()&&(this.wrapperElement.focus(),this.dispatchEvent("focus")),this}hasFocus(){return t.hasFocus(this.wrapperElement)}click(){return this.enabled&&this.dispatchEvent("click"),this}setDescription(t){const s=n.get(this);return null==s.descriptionelement&&(s.descriptionelement=document.createElement("div"),s.descriptionelement.className="se-popup-menu-item-description",s.bodyelement.appendChild(s.descriptionelement)),t instanceof e.StyledElement?(s.descriptionelement.innerHTML="",t.appendTo(s.descriptionelement)):s.descriptionelement.textContent=t,this}setTitle(t){const s=n.get(this);return t instanceof e.StyledElement?(s.titleelement.innerHTML="",t.appendTo(s.titleelement)):s.titleelement.textContent=t,this}get description(){return n.get(this).descriptionelement.textContent}get title(){return n.get(this).titleelement.textContent}}}(StyledElements,StyledElements.Utils),function(e,t){"use strict";e.Separator=class extends e.StyledElement{constructor(){super([]),this.wrapperElement=document.createElement("hr")}}}(StyledElements,StyledElements.Utils),function(e,t){"use strict";e.SubMenuItem=class extends e.PopupMenuBase{constructor(e,n){super(n=t.merge({placement:["right-bottom","left-bottom"]},n)),this.wrapperElement.classList.add("se-popup-submenu");const s=new StyledElements.MenuItem(e,()=>{this.show(s)});s.addClassName("submenu"),Object.defineProperty(s,"submenu",{value:this}),Object.defineProperties(this,{menuitem:{value:s},title:{get:()=>s.title}}),null!=n.enabled&&(this.enabled=n.enabled),null!=n.iconClass&&this.addIconClass(n.iconClass)}_menuItemCallback(e){let t=this;for(;t.parentMenu;)t=t.parentMenu;t.hide(),e.run(t._context)}_setParentPopupMenu(e){this.parentMenu=e,this.parentMenu.addEventListener("itemOver",(e,t)=>{t===this.menuitem?this.show(this.menuitem):this.hide()})}addEventListener(e,t){switch(e){case"mouseenter":case"mouseleave":case"click":case"blur":case"focus":return this.menuitem.addEventListener(e,t),this;default:return super.addEventListener(e,t)}}addIconClass(e){return this.menuitem.addIconClass(e),this}enable(){return this.menuitem.enable(),this}disable(){return this.menuitem.disable(),this}setDisabled(e){return this.menuitem.setDisabled(e),this}destroy(){this.menuitem.destroy(),super.destroy()}}}(StyledElements,StyledElements.Utils),function(e,t){"use strict";const n={menuOptions:null,menu:null};e.PopupButton=class extends e.Button{constructor(e){super(e=t.merge({},n,e)),null!=e.menu?(this.popup_menu=e.menu,this._owned_popup_menu=!1):(this.popup_menu=new this.PopupMenu(e.menuOptions),this._owned_popup_menu=!0),this.addEventListener("click",()=>{this.popup_menu.isVisible()?this.popup_menu.hide():this.popup_menu.show(this)}),this._visibilityChangeListener=function(){this.popup_menu.isVisible()?this.wrapperElement.classList.add("open"):this.wrapperElement.classList.remove("open")}.bind(this),this.popup_menu.addEventListener("visibilityChange",this._visibilityChangeListener)}_onkeydown(e,t){switch(t){case"ArrowDown":e.preventDefault(),this.popup_menu.show(this.getBoundingClientRect()).moveFocusDown();break;case"ArrowUp":e.preventDefault(),this.popup_menu.show(this.getBoundingClientRect()).moveFocusUp();break;case" ":case"Enter":this._clickCallback(e);break;case"Tab":this.popup_menu.hasEnabledItem()&&(e.preventDefault(),this.popup_menu.moveFocusDown())}}getPopupMenu(){return this.popup_menu}replacePopupMenu(e){this._owned_popup_menu&&(this.popup_menu.destroy(),this._owned_popup_menu=!1),this.popup_menu=e}destroy(){StyledElements.Button.prototype.destroy.call(this),this._owned_popup_menu?this.popup_menu.destroy():this.popup_menu.removeEventListener("visibilityChange",this._visibilityChangeListener),this.popup_menu=null}},e.PopupButton.prototype.PopupMenu=StyledElements.PopupMenu}(StyledElements,StyledElements.Utils),function(e,t){"use strict";const n=new WeakMap,s=function(e,t){let n,s,i;for(n="string"==typeof t?[t]:t.slice(0),s=e;null!=s&&n.length>0;)s=s[i=n.splice(0,1)[0]];if(!(n.length>0))return s},i=function(e,t){return Object.getOwnPropertyNames(e).some(function(n,i,l){const r=s(e,n);switch(typeof r){case"number":return t.test(""+r);case"string":return t.test(r);default:return!1}})},l=function(e){return new RegExp(t.escapeRegExp(e),"i")},r=function(e){const t=n.get(this);if(!e)return void(t.filteredElements=t.elements.slice(0));const s=l(e),r=[];for(let e=0;e<t.elements.length;e+=1){const n=t.elements[e];i.call(this,n,s)&&r.push(n)}t.filteredElements=r},a=function(e){let t,i,l,r;const a=n.get(this);if(null==e)return void(a.sortedElements=a.filteredElements);i=!1,"-"===(t=e[0])[0]&&(i=!0,t=t.substr(1));const o=a.sort_info[t]||{};if("field"in o||(o.field=t),null==(l=o.sortFunc))switch(o.type){case"date":r="function"==typeof o.dateparser?o.dateparser:function(e){return new Date(e)},l=function(e,t){e=s(e,this.field);try{if(e=r(e),isNaN(e.getTime()))throw new Error}catch(t){e=new Date(0)}t=s(t,this.field);try{if(t=r(t),isNaN(t.getTime()))throw new Error}catch(e){t=new Date(0)}return e-t}.bind({field:o.field});break;case"number":l=function(e,t){return(e=null!==(e=s(e,this.field))?Number(e):0)-(t=null!==(t=s(t,this.field))?Number(t):0)}.bind({field:o.field});break;default:case"text":l=function(e,t){return e=null!=(e=s(e,this.field))?e.toString():"",t=null!=(t=s(t,this.field))?t.toString():"",e.localeCompare(t)}.bind({field:o.field})}i&&(l=function(e,t){return-this(e,t)}.bind(l)),a.sortedElements=a.filteredElements.slice(0).sort(l)},o=function(e,t,s,i){const l=n.get(this);let o;if(e>l.totalPages?e=l.totalPages:e<0&&(e=0),r.call(this,this.options.keywords),a.call(this,this.options.order),t.pageSize>0){const n=(e-1)*t.pageSize,s=n+t.pageSize;o=l.sortedElements.slice(n,s)}else o=l.sortedElements;s(o,{current_page:e,total_count:l.sortedElements.length})},u=function(){return n.get(this).elements.length},c=function(e,t,n){if(!n)return-2;let s=-1;const i=n(t);return e.every((e,t)=>n(e)!==i||(s=t,!1)),s};e.StaticPaginatedSource=class extends e.PaginatedSource{constructor(e){"object"!=typeof e&&(e={}),e.requestFunc=o,super(e);const t={};n.set(this,t),t.sort_info=e.sort_info,"object"!=typeof t.sort_info&&(t.sort_info={}),"string"==typeof e.idAttr?t.extractIdFunc=(t=>t[e.idAttr]):Array.isArray(e.idAttr)?t.extractIdFunc=(t=>s(t,e.idAttr)):"function"==typeof e.idAttr&&(t.extractIdFunc=e.idAttr),Object.defineProperties(this,{length:{get:u}}),this.changeElements(e.initialElements)}changeOptions(e){let t=!1;return"keywords"in e&&(r.call(this,e.keywords),t=!0),"order"in e?a.call(this,e.order):t&&a.call(this,this.options.order),super.changeOptions(e)}getElements(){return n.get(this).elements.slice(0)}changeElements(e){const t=n.get(this);if(Array.isArray(e)){if(this.options.idAttr){if(!e.every((n,s)=>{if(null==t.extractIdFunc(n))throw new Error("All elements must have a valid ID");return c(e.slice(0,s),n,t.extractIdFunc)<=-1}))throw new Error("All elements must have an unique ID")}t.elements=e}else t.elements=[];return r.call(this,this.options.keywords),a.call(this,this.options.order),this.refresh(),this}addElement(e){const t=n.get(this);if(this.options.idAttr&&null==t.extractIdFunc(e))throw new Error("The element must have a valid ID");let s=c(t.elements,e,t.extractIdFunc);if(s>=0&&t.elements.splice(s,1),t.elements.push(e),(s=c(t.filteredElements,e,t.extractIdFunc))>=0&&t.filteredElements.splice(s,1),this.options.keywords){const n=l(this.options.keywords);i.call(this,e,n)&&t.filteredElements.push(e)}else t.filteredElements.push(e);return a.call(this,this.options.order),this.refresh(),this}removeElement(e){const t=n.get(this);if(!this.options.idAttr)throw new Error("options.idAttr is not set");if(null==t.extractIdFunc(e))throw new Error("The element must have a valid ID");const s=c(t.elements,e,t.extractIdFunc);if(s>=0)return t.elements.splice(s,1),r.call(this,this.options.keywords),a.call(this,this.options.order),this;throw new Error("Element does not exist")}}}(StyledElements,StyledElements.Utils),function(e,t){"use strict";const n={class:""};Object.freeze(n),e.FileField=class extends e.InputElement{constructor(e){super((e=t.merge({},n,e)).initialValue,["change","focus","blur"]),this.layout=new StyledElements.HorizontalLayout({class:"se-file-field input input-append"}),this.wrapperElement=this.layout.wrapperElement,""!==e.class&&(this.wrapperElement.className+=" "+e.class);const s=document.createElement("div");s.className="input_wrapper",this.wrapperElement.appendChild(s),this.inputElement=document.createElement("input"),this.inputElement.setAttribute("type","file"),this.inputElement.setAttribute("tabindex",0),s.appendChild(this.inputElement),e.name&&this.inputElement.setAttribute("name",e.name),null!=e.id&&this.wrapperElement.setAttribute("id",e.id),this.name_preview=document.createElement("div"),this.name_preview.className="filename",this.layout.getCenterContainer().appendChild(this.name_preview);const i=document.createElement("div");i.className="se-btn";const l=document.createElement("span");l.textContent=t.gettext("Select"),i.appendChild(l),this.layout.getEastContainer().appendChild(i),this._onchange=function(){const e=this.getValue(),t=null!=e?e.name:"";this.name_preview.textContent=t,this.name_preview.setAttribute("title",t),this.dispatchEvent("change")}.bind(this),this._onclick=function(e){if(e.target!==this.inputElement)return this.inputElement.click(),e.stopPropagation(),e.preventDefault(),!1}.bind(this),this._onfocus=function(){this.wrapperElement.classList.add("focus"),this.dispatchEvent("focus")}.bind(this),this._onblur=function(){this.wrapperElement.classList.remove("focus"),this.dispatchEvent("blur")}.bind(this),this.inputElement.addEventListener("mousedown",t.stopPropagationListener,!0),this.wrapperElement.addEventListener("click",this._onclick,!0),this.inputElement.addEventListener("change",this._onchange,!0),this.inputElement.addEventListener("focus",this._onfocus,!0),this.inputElement.addEventListener("blur",this._onblur,!0)}repaint(){this.layout.repaint()}insertInto(e,t){super.insertInto(e,t),this.repaint()}getValue(){return this.inputElement.files[0]}destroy(){this.inputElement.removeEventListener("mousedown",t.stopPropagationListener,!0),this.wrapperElement.removeEventListener("click",this._onclick,!0),this.inputElement.removeEventListener("change",this._onchange,!0),this.inputElement.removeEventListener("focus",this._onfocus,!0),this.inputElement.removeEventListener("blur",this._onblur,!0),delete this._onchange,delete this._onfocus,delete this._onblur,super.destroy()}}}(StyledElements,StyledElements.Utils),function(e,t){"use strict";const n=function(e){let t=this.getValue();isNaN(t)?t=e>0&&this.options.min!==Number.NEGATIVE_INFINITY?this.options.min:e<0&&this.options.max!==Number.POSITIVE_INFINITY?this.options.max:0:(t=Math.round(100*(t+e))/100)>this.options.max?t=this.options.max:t<this.options.min&&(t=this.options.min),this.inputElement.value=t};e.NumericField=class extends e.InputElement{constructor(e){const s={initialValue:0,class:"",min:Number.NEGATIVE_INFINITY,max:Number.POSITIVE_INFINITY,inc:1};e.min=Number(e.min),e.max=Number(e.max),e.inc=Number(e.inc),e.initialValue=Number(e.initialValue),super(e.initialValue,["change","focus","blur"]),this.options=e=t.merge({},s,e),this.wrapperElement=document.createElement("div"),this.wrapperElement.className="se-numeric-field",this.inputElement=document.createElement("input"),this.inputElement.setAttribute("type","text"),null!=e.name&&this.inputElement.setAttribute("name",e.name),null!=e.id&&this.wrapperElement.setAttribute("id",e.id),this.inputElement.setAttribute("value",e.initialValue);const i=new StyledElements.Button({class:"se-numeric-field-top-button",iconClass:"fas fa-caret-up"}),l=new StyledElements.Button({class:"se-numeric-field-bottom-button",iconClass:"fas fa-caret-down"});i.addEventListener("click",n.bind(this,e.inc)),l.addEventListener("click",n.bind(this,-e.inc)),this.inputElement.addEventListener("focus",function(){this.wrapperElement.classList.add("focus"),this.dispatchEvent("focus")}.bind(this),!0),this.inputElement.addEventListener("blur",function(){this.wrapperElement.classList.remove("focus"),this.dispatchEvent("blur")}.bind(this),!0),this.inputElement.addEventListener("keydown",t.stopInputKeydownPropagationListener,!1),this.wrapperElement.appendChild(this.inputElement),i.insertInto(this.wrapperElement),l.insertInto(this.wrapperElement)}getValue(){return Number(this.inputElement.value)}}}(StyledElements,StyledElements.Utils),function(e,t){"use strict";const n=["Escape","Enter"];e.TextField=class extends e.InputElement{constructor(e){super((e=t.merge({},{initialValue:"",class:"",placeholder:null},e)).initialValue,["change","focus","blur","submit","keydown"]),this.inputElement=document.createElement("input"),this.inputElement.setAttribute("type","text"),this.wrapperElement=this.inputElement,this.wrapperElement.className="se-text-field",""!==e.class&&(this.wrapperElement.className+=" "+e.class),e.name&&this.inputElement.setAttribute("name",e.name),null!=e.placeholder&&this.setPlaceholder(e.placeholder),null!=e.id&&this.wrapperElement.setAttribute("id",e.id),this.inputElement.setAttribute("value",e.initialValue),this._oninput=function(){this.dispatchEvent("change")}.bind(this),this._onfocus=function(){this.dispatchEvent("focus")}.bind(this),this._onblur=function(){this.dispatchEvent("blur")}.bind(this),this._onkeypress=function(e){"Enter"===t.normalizeKey(e)&&this.dispatchEvent("submit")}.bind(this),this.inputElement.addEventListener("mousedown",t.stopPropagationListener,!0),this.inputElement.addEventListener("click",t.stopPropagationListener,!0),this.inputElement.addEventListener("input",this._oninput,!0),this.inputElement.addEventListener("focus",this._onfocus,!0),this.inputElement.addEventListener("blur",this._onblur,!0),this.inputElement.addEventListener("keypress",this._onkeypress,!0),this._onkeydown_bound=function(e){const s=t.extractModifiers(e),i=t.normalizeKey(e);(s.altKey||s.metaKey||s.ctrlKey||-1!==n.indexOf(i))&&"Backspace"!==i||e.stopPropagation(),this.enabled&&(s.preventDefault=e.preventDefault.bind(e),s.stopPropagation=e.stopPropagation.bind(e),s.key=i,this.dispatchEvent("keydown",s,i))}.bind(this),this.inputElement.addEventListener("keydown",this._onkeydown_bound,!1)}setPlaceholder(e){this.inputElement.setAttribute("placeholder",e)}destroy(){this.inputElement.removeEventListener("mousedown",t.stopPropagationListener,!0),this.inputElement.removeEventListener("click",t.stopPropagationListener,!0),this.inputElement.removeEventListener("input",this._oninput,!0),this.inputElement.removeEventListener("focus",this._onfocus,!0),this.inputElement.removeEventListener("blur",this._onblur,!0),this.inputElement.removeEventListener("keypress",this._onkeypress,!0),this.inputElement.removeEventListener("keydown",this._onkeydown_bound,!1),delete this._oninput,delete this._onfocus,delete this._onblur,delete this._onkeypress,delete this._onkeydown_bound,super.destroy()}}}(StyledElements,StyledElements.Utils),function(e,t){"use strict";e.TextArea=class extends e.InputElement{constructor(e){super((e=t.merge({initialValue:"",class:""},e)).initialValue,["blur","change","focus"]),this.inputElement=document.createElement("textarea"),this.wrapperElement=this.inputElement,this.wrapperElement.className="se-text-area",""!==e.class&&(this.wrapperElement.className+=" "+e.class),e.name&&this.inputElement.setAttribute("name",e.name),null!=e.id&&this.wrapperElement.setAttribute("id",e.id),this.setValue(e.initialValue),this._oninput=function(){this.dispatchEvent("change")}.bind(this),this._onfocus=function(){this.dispatchEvent("focus")}.bind(this),this._onblur=function(){this.dispatchEvent("blur")}.bind(this),this.inputElement.addEventListener("mousedown",t.stopPropagationListener,!0),this.inputElement.addEventListener("click",t.stopPropagationListener,!0),this.inputElement.addEventListener("input",this._oninput,!0),this.inputElement.addEventListener("focus",this._onfocus,!0),this.inputElement.addEventListener("blur",this._onblur,!0),this.inputElement.addEventListener("keydown",t.stopInputKeydownPropagationListener,!1)}select(){this.inputElement.select()}destroy(){this.inputElement.removeEventListener("mousedown",t.stopPropagationListener,!0),this.inputElement.removeEventListener("click",t.stopPropagationListener,!0),this.inputElement.removeEventListener("input",this._oninput,!0),this.inputElement.removeEventListener("focus",this._onfocus,!0),this.inputElement.removeEventListener("blur",this._onblur,!0),this.inputElement.removeEventListener("keydown",t.stopInputKeydownPropagationListener,!1),delete this._oninput,delete this._onfocus,delete this._onblur,super.destroy()}}}(StyledElements,StyledElements.Utils),function(e,t){"use strict";const n=function(){this.listComponent.enabled&&this.listComponent.toggleElementSelection(this.value)},s=function(){for(let e=0;e<this.currentSelection.length;e++){const t=this.currentSelection[e];this.entriesByValue[t].element.classList.remove("selected")}this.currentSelection=[]};e.List=class extends e.StyledElement{constructor(e){e=t.merge({class:"",id:null,multivalued:!1,initialEntries:[],initialSelection:[]},e),super(["change"]),this.wrapperElement=document.createElement("div"),this.wrapperElement.className=t.prependWord(e.class,"styled_list"),null!=e.id&&(this.wrapperElement.id=e.id),this.content=document.createElement("div"),this.wrapperElement.appendChild(this.content),this.entries=[],this.entriesByValue={},this.currentSelection=[],this.addEntries(e.initialEntries),this.select(e.initialSelection),e.full&&this.wrapperElement.classList.add("full"),this.multivalued=e.multivalued,void 0===e.allowEmpty?this.allowEmpty=this.multivalued:this.allowEmpty=e.allowEmpty}addEntries(e){let t,s;if(null!=e&&0!==e.length){if(!Array.isArray(e))throw new TypeError;for(let i=0;i<e.length;i++){const l=e[i];Array.isArray(l)?(t=l[0],s=l[1]):(t=e[i].value,s=e[i].label),s=s||t;const r=document.createElement("div");r.className="row";const a={listComponent:this,value:t};r.addEventListener("click",n.bind(a),!0),l.element=r,r.appendChild(document.createTextNode(s)),this.content.appendChild(r),this.entriesByValue[t]=l}this.entries=this.entries.concat(e)}}removeEntryByValue(e){const t=this.entriesByValue[e];delete this.entriesByValue[e],this.entries.slice(this.entries.indexOf(t),1),t.element.remove();const n=this.currentSelection.indexOf(t);-1!==n&&(this.currentSelection.splice(n,1),this.dispatchEvent("change",this.currentSelection,[],[e]))}clear(){this.cleanSelection(),this.content.innerHTML="",this.entries=[],this.entriesByValue={}}getSelection(){return t.clone(this.currentSelection)}cleanSelection(){if(0===this.currentSelection.length)return;const e=this.currentSelection;s.call(this),this.dispatchEvent("change",[],[],e)}select(e){s.call(this),this.addSelection(e)}addSelection(e){if(0===e.length)return;const t=[];let n=[];if(!this.multivalued){if(e[0]===this.currentSelection[0])return;n=this.currentSelection,s.call(this),e.length>1&&(e=e.splice(0,1))}e.forEach(e=>{-1===this.currentSelection.indexOf(e)&&(this.entriesByValue[e].element.classList.add("selected"),this.currentSelection.push(e),t.push(e))}),this.dispatchEvent("change",this.currentSelection,t,n)}removeSelection(e){if(0===e.length)return;const t=[];e.forEach(e=>{this.entriesByValue[e].element.classList.remove("selected");const n=this.currentSelection.indexOf(e);-1!==n&&(this.currentSelection.splice(n,1),this.entriesByValue[e].element.classList.remove("selected"),t.push(e))}),t.length>0&&this.dispatchEvent("change",this.currentSelection,[],t)}toggleElementSelection(e){this.entriesByValue[e].element.classList.contains("selected")?this.allowEmpty&&this.removeSelection([e]):this.addSelection([e])}}}(StyledElements,StyledElements.Utils),function(e,t){"use strict";e.PasswordField=class extends e.InputElement{constructor(e){super((e=t.merge({},{initialValue:"",class:""},e)).initialValue,["change","focus","blur"]),this.inputElement=document.createElement("input"),this.inputElement.setAttribute("type","password"),this.wrapperElement=this.inputElement,this.wrapperElement.className="se-password-field",""!==e.class&&(this.wrapperElement.className+=" "+e.class),"name"in e&&this.inputElement.setAttribute("name",e.name),"id"in e&&this.wrapperElement.setAttribute("id",e.id),this.inputElement.setAttribute("value",e.initialValue),this._oninput=function(){this.dispatchEvent("change")}.bind(this),this._onfocus=function(){this.dispatchEvent("focus")}.bind(this),this._onblur=function(){this.dispatchEvent("blur")}.bind(this),this.inputElement.addEventListener("mousedown",t.stopPropagationListener,!0),this.inputElement.addEventListener("click",t.stopPropagationListener,!0),this.inputElement.addEventListener("input",this._oninput,!0),this.inputElement.addEventListener("focus",this._onfocus,!0),this.inputElement.addEventListener("blur",this._onblur,!0),this.inputElement.addEventListener("keydown",t.stopInputKeydownPropagationListener,!1)}destroy(){this.inputElement.removeEventListener("mousedown",t.stopPropagationListener,!0),this.inputElement.removeEventListener("click",t.stopPropagationListener,!0),this.inputElement.removeEventListener("input",this._oninput,!0),this.inputElement.removeEventListener("focus",this._onfocus,!0),this.inputElement.removeEventListener("blur",this._onblur,!0),this.inputElement.removeEventListener("keydown",t.stopInputKeydownPropagationListener,!1),super.destroy(this)}}}(StyledElements,StyledElements.Utils),function(e,t){"use strict";e.Select=class extends e.InputElement{constructor(e){super((e=t.merge({class:"",initialEntries:[],initialValue:null,idFunc:function(e){return null==e?"":e.toString()}},e)).initialValue,["change","focus","blur"]),this.wrapperElement=document.createElement("div"),this.wrapperElement.className="se-select",this.addClassName(e.class);const n=document.createElement("div");n.className="se-select-arrow fas fa-caret-down",this.inputElement=document.createElement("select"),e.name&&this.inputElement.setAttribute("name",e.name),e.id&&this.wrapperElement.setAttribute("id",e.id),this.textDiv=document.createElement("div"),this.textDiv.className="se-select-text",this.wrapperElement.appendChild(this.textDiv),this.wrapperElement.appendChild(n),this.wrapperElement.appendChild(this.inputElement),this.optionsByValue={},this.optionValues={},this.idFunc=e.idFunc,this.addEntries(e.initialEntries),this._onchange=function(e){if(this.enabled){const t=e.target;this.textDiv.textContent=t[t.selectedIndex].text,this.dispatchEvent("change")}}.bind(this),this._onfocus=function(){this.addClassName("focus").dispatchEvent("focus")}.bind(this),this._onblur=function(){this.removeClassName("focus").dispatchEvent("blur")}.bind(this),this.inputElement.addEventListener("mousedown",t.stopPropagationListener,!0),this.inputElement.addEventListener("click",t.stopPropagationListener,!0),this.inputElement.addEventListener("change",this._onchange,!0),this.inputElement.addEventListener("focus",this._onfocus,!0),this.inputElement.addEventListener("blur",this._onblur,!0);const s=this.inputElement.options.selectedIndex;-1!==s&&(this.textDiv.textContent=this.inputElement.options[s].text)}getLabel(){return this.textDiv.textContent}getValue(){return this.optionValues[this.inputElement.value]}setValue(e){if("string"!=typeof e)try{e=this.idFunc(e)}catch(t){e=null}if(null===e||!(e in this.optionValues))if(null!=this.defaultValue)e=this.defaultValue;else{if(!(this.inputElement.options.length>0))return super.setValue(""),void(this.textDiv.textContent="");e=this.inputElement.options[0].value}super.setValue(e),this.textDiv.textContent=this.optionsByValue[e]}addEntries(e){let t,n,s;const i=this.inputElement.options.selectedIndex,l=void 0!==this.defaultValue?this.idFunc(this.defaultValue):null;if(null==e||0===e.length)return;for(let i=0;i<e.length;i++){s=e[i];const r=document.createElement("option");Array.isArray(s)?(t=s[0],n=s[1]):null!=s.value?(t=s.value,n=s.label):(t=s,n=s),n=n||t;const a=t;"string"!=typeof t&&(t=this.idFunc(t)),r.setAttribute("value",t),r.appendChild(document.createTextNode(n)),l===t&&r.setAttribute("selected","selected"),this.inputElement.appendChild(r),this.optionValues[t]=a,this.optionsByValue[t]=n}const r=this.inputElement.options.selectedIndex;i!==r&&(this.textDiv.textContent=this.inputElement.options[r].text)}clear(){this.textDiv.textContent="",this.inputElement.textContent="",this.optionsByValue={},this.optionValues={}}destroy(){this.inputElement.removeEventListener("mousedown",t.stopPropagationListener,!0),this.inputElement.removeEventListener("click",t.stopPropagationListener,!0),this.inputElement.removeEventListener("change",this._onchange,!0),this.inputElement.removeEventListener("focus",this._onfocus,!0),this.inputElement.removeEventListener("blur",this._onblur,!0),delete this._onchange,delete this._onfocus,delete this._onblur,super.destroy()}}}(StyledElements,StyledElements.Utils),function(e,t){"use strict";const n={initiallyChecked:!1};Object.freeze(n),e.ToggleButton=class extends e.Button{constructor(e){super(e=t.merge({},n,e)),this.events.active=new StyledElements.Event(this),this.active=e.initiallyChecked}get active(){return this.hasClassName("active")}set active(e){e=!!e,this.hasClassName("active")!==e&&(this.toggleClassName("active",e),this.dispatchEvent("active",e))}_clickCallback(e){e.stopPropagation(),this.click()}click(){return this.enabled&&(this.active=!this.active,this.dispatchEvent("click")),this}}}(StyledElements,StyledElements.Utils),function(e,t){"use strict";e.Pills=class extends e.Container{constructor(e){super(e,["change"]),this.wrapperElement=document.createElement("ul"),this.wrapperElement.className=t.appendWord(e.class,"se-pills"),this.activePill=null,this.pills={}}add(e,t){const n=document.createElement("li");n.className="se-pill",n.textContent=t,n.addEventListener("click",function(e,t){t.preventDefault(),t.stopPropagation(),this.switchPill(e)}.bind(this,e),!0),this.wrapperElement.appendChild(n),this.pills[e]=n}switchPill(e){if(!(e in this.pills))throw new TypeError("Invalid pill id");e!==this.activePill&&(null!=this.activePill&&this.pills[this.activePill].classList.remove("active"),this.activePill=e,this.pills[this.activePill].classList.add("active"),this.dispatchEvent("change",e))}}}(StyledElements,StyledElements.Utils),function(e,t){"use strict";const n=new WeakMap,s=function(){return n.get(this).tabElement.textContent},i=function(){return n.get(this).tabElement},l=Object.freeze({closable:!0,containerOptions:{},label:""});e.Tab=class r extends e.Container{constructor(a,o,u){if(!(o instanceof e.Notebook))throw new TypeError("Invalid notebook argument");(u=t.merge({},l,u)).useFullHeight=!0,super(u.containerOptions,["show","hide","close"]),Object.defineProperties(this,{label:{get:s},notebook:{value:o},tabElement:{get:i},tabId:{value:a}});const c={labelElement:document.createElement("span"),tabElement:document.createElement("li")};if(n.set(this,c),c.tabElement.className="se-notebook-tab",c.tabElement.appendChild(c.labelElement),this.wrapperElement.classList.add("se-notebook-tab-content"),this.wrapperElement.classList.add("hidden"),c.tabElement.addEventListener("click",()=>{this.notebook.goToTab(this.tabId)},!1),u.closable){const e=new this.Button({iconClass:"fas fa-times",plain:!0,class:"close_button"});e.insertInto(c.tabElement),e.addEventListener("click",this.close.bind(this),!1)}null!=u.name&&(u.label=u.name),r.prototype.setLabel.call(this,u.label),this.setTitle(u.title)}close(){return this.notebook.removeTab(this.tabId),this.dispatchEvent("close")}setLabel(e){return n.get(this).labelElement.textContent=e,this}setTitle(e){return null==e||""===e?null!=this.tooltip&&(this.tooltip.destroy(),this.tooltip=null):(null==this.tooltip&&(this.tooltip=new this.Tooltip({content:e,placement:["bottom","top","right","left"]}),this.tooltip.bind(n.get(this).tabElement)),this.tooltip.options.content=e),this}setVisible(e){return e?this.show():this.hide()}hide(){return super.hide(),n.get(this).tabElement.classList.remove("selected"),this}show(){return super.show(),n.get(this).tabElement.classList.add("selected"),this.repaint(!1),this}getTabElement(){return n.get(this).tabElement}},e.Tab.prototype.rename=e.Tab.prototype.setLabel,e.Tab.prototype.Tooltip=e.Tooltip,e.Tab.prototype.Button=e.Button}(StyledElements,StyledElements.Utils),function(e,t){"use strict";const n=function(e,t){const n=this.tabs[e].getTabElement(),s=this.tabArea.wrapperElement.scrollLeft,i=s+this.tabArea.wrapperElement.clientWidth;if(t){const e=n.offsetLeft+n.offsetWidth;return n.offsetLeft>=s&&e<=i}return n.offsetLeft>=s&&n.offsetLeft<=i},s=function(){const e=this.tabs.length-1;return!(0!==this.tabs.length&&!n.call(this,e,!0))||!!n.call(this,e)&&(this.tabs.length<2||!n.call(this,e-1))},i=function(){if(0===this.tabs.length)return this.moveLeftButton.disable(),this.moveRightButton.disable(),void(null!=this.new_tab_button_tabs&&(this.new_tab_button_tabs.enable(),this.new_tab_button_left.disable()));let e=n.call(this,0);const t=s.call(this);this.moveLeftButton.setDisabled(e),this.moveRightButton.setDisabled(t),null!=this.new_tab_button_tabs&&((e=n.call(this,0,!0))&&t?(this.new_tab_button_tabs.enable(),this.new_tab_button_left.disable()):(this.new_tab_button_tabs.disable(),this.new_tab_button_left.enable()),this.tabWrapper.repaint())},l=function(){return this.tabs.findIndex((e,t)=>n.call(this,t))},r={class:"",focusOnSetVisible:!0,full:!0};Object.freeze(r),e.Notebook=class extends e.StyledElement{constructor(e){super(["change","changed","tabDeletion","tabInsertion","newTab"]),e=t.merge({},r,e),this.wrapperElement=document.createElement("div"),this.wrapperElement.className=t.prependWord(e.class,"se-notebook");const a=new StyledElements.HorizontalLayout({class:"se-notebook-tabs-wrapper",autoHeight:!1});this.tabWrapper=a,a.insertInto(this.wrapperElement),this.tabArea=new StyledElements.Container,a.center.appendChild(this.tabArea.addClassName("se-notebook-tab-area")),this.moveLeftButton=new this.Button({class:"move_left",iconClass:"fas fa-caret-left"}),a.west.appendChild(this.moveLeftButton),this.moveRightButton=new this.Button({class:"move_right",iconClass:"fas fa-caret-right"}),a.east.appendChild(this.moveRightButton),this.contentArea=document.createElement("div"),this.contentArea.className="se-notebook-content-wrapper",this.wrapperElement.appendChild(this.contentArea),this.tabs=[],this.tabsById=[],this.visibleTab=null,null!=e.id&&this.wrapperElement.setAttribute("id",e.id),e.full&&this.wrapperElement.classList.add("full"),this.focusOnSetVisible=e.focusOnSetVisible,this.events.newTab.addEventListener=function(e){if(null==this.new_tab_button_tabs){const e=function(){this.dispatchEvent("newTab")}.bind(this);this.new_tab_button_tabs=new this.Button({iconClass:"fas fa-plus",class:"se-notebook-new-tab",title:t.gettext("Add Tab")}),this.new_tab_button_tabs.addEventListener("click",e),this.tabArea.appendChild(this.new_tab_button_tabs),this.new_tab_button_left=new this.Button({iconClass:"fas fa-plus",class:"se-notebook-new-tab",title:t.gettext("Add Tab")}),this.new_tab_button_left.addEventListener("click",e),this.addButton(this.new_tab_button_left)}StyledElements.Event.prototype.addEventListener.call(this.events.newTab,e)}.bind(this);const o={control:this,initialScrollLeft:null,finalScrollLeft:null,steps:null,step:null,inc:null};this.transitionsQueue=new StyledElements.CommandQueue(o,function(e,t){e.initialScrollLeft=e.control.tabArea.wrapperElement.scrollLeft;const r=document.defaultView.getComputedStyle(e.control.tabArea.wrapperElement,null).getPropertyCSSValue("padding-left").getFloatValue(CSSPrimitiveValue.CSS_PX);let a;switch(t.type){case"shiftLeft":if(0===e.control.tabs.length||n.call(e.control,0))return!1;a=l.call(e.control),e.tab=e.control.tabs[a-1],e.finalScrollLeft=e.tab.getTabElement().offsetLeft-r;break;case"shiftRight":if(s.call(e.control))return!1;a=l.call(e.control),e.tab=e.control.tabs[a+1],e.finalScrollLeft=e.tab.getTabElement().offsetLeft-r;break;case"focus":if(null==t.tab||e.control.tabsById[t.tab.tabId]!==t.tab)return!1;if(e.tab=t.tab,n.call(e.control,e.control.getTabIndex(t.tab),!0))return!1;e.finalScrollLeft=e.tab.getTabElement().offsetLeft-r}const o=e.control.tabArea.wrapperElement.scrollWidth-e.control.tabArea.wrapperElement.clientWidth;e.finalScrollLeft>o&&(e.finalScrollLeft=o);const u=(new Date).getTime()+100,c=[];e.steps=6;for(let t=0;t<=e.steps;t++)c[t]=u+100*t;return e.step=0,e.inc=Math.floor((e.finalScrollLeft-e.initialScrollLeft)/e.steps),new Promise((t,n)=>{const s=()=>{if(e.control.tabsById[e.tab.tabId]!==e.tab)return t();if(function(e,t){const n=t.initialScrollLeft+Math.floor((e+1)*t.inc);return t.inc<0&&n>t.finalScrollLeft||t.inc>0&&n<t.finalScrollLeft?(t.control.tabArea.wrapperElement.scrollLeft=Math.round(n),!0):(t.control.tabArea.wrapperElement.scrollLeft=t.finalScrollLeft,i.call(t.control),!1)}(e.step,e)){let t=c[e.step]-(new Date).getTime();t<0&&(t=0),e.step++,setTimeout(s,t)}else t()};setTimeout(s,0)})}),this.moveLeftButton.addEventListener("click",this.shiftLeftTabs.bind(this)),this.moveRightButton.addEventListener("click",this.shiftRightTabs.bind(this))}get fullscreen(){return t.getFullscreenElement()===this.wrapperElement}shiftLeftTabs(){return this.transitionsQueue.addCommand({type:"shiftLeft"})}shiftRightTabs(){return this.transitionsQueue.addCommand({type:"shiftRight"})}createTab(e){const n={initiallyVisible:!1,tab_constructor:this.Tab};e=t.merge(n,e);const s=this.tabsById.push(null);if(e.tab_constructor!==this.Tab&&!(e.tab_constructor.prototype instanceof StyledElements.Tab))throw new TypeError;const l=new e.tab_constructor(s,this,e);this.tabs[this.tabs.length]=l,this.tabsById[s]=l;const r=l.getTabElement();return null!=this.new_tab_button_tabs?this.tabArea.prependChild(r,this.new_tab_button_tabs):this.tabArea.appendChild(r),l.insertInto(this.contentArea),this.visibleTab||(this.visibleTab=l,l.setVisible(!0)),i.call(this),e.initiallyVisible&&this.goToTab(s),this.dispatchEvent("tabInsertion",l),l}getTab(e){return this.tabsById[e]}getTabByLabel(e){for(let t=0;t<this.tabs.length;t++)if(this.tabs[t].label===e)return this.tabs[t];return null}getTabByIndex(e){return this.tabs[e]}getTabIndex(e){if(e instanceof StyledElements.Tab){if(this.tabsById[e.tabId]!==e)return null;e=e.tabId}for(let t=0;t<this.tabs.length;t++)if(this.tabs[t].tabId===e)return t;return null}removeTab(e){if(e instanceof StyledElements.Tab){if(this.tabsById[e.tabId]!==e)throw new TypeError("tab is not owned by this notebook");e=e.tabId}if(!this.tabsById[e])return this;delete this.tabsById[e];const t=this.getTabIndex(e),n=this.tabs.splice(t,1)[0];if(this.tabArea.removeChild(n.getTabElement()),this.contentArea.removeChild(n.wrapperElement),i.call(this),this.visibleTab===n&&this.tabs.length>0){const e=null!=this.tabs[t]?this.tabs[t]:this.tabs[t-1];this.goToTab(e.tabId)}else this.visibleTab===n&&(this.visibleTab=null);return n.dispatchEvent("close",this),this.dispatchEvent("tabDeletion",n),this}goToTab(e,t){let n;if(e instanceof StyledElements.Tab){if(this.tabsById[e.tabId]!==e)throw new TypeError("tab is not owned by this notebook");n=e}else if(null==(n=this.tabsById[e]))throw new TypeError("Invalid tab id");const s=this.visibleTab;null==t&&(t={}),this.visibleTab&&n===this.visibleTab?this.focusOnSetVisible&&this.focus(n.tabId):(this.dispatchEvent("change",s,n,t.context),this.visibleTab.setVisible(!1),this.visibleTab=n,this.visibleTab.setVisible(!0),this.focusOnSetVisible&&this.focus(n.tabId),this.dispatchEvent("changed",s,n,t.context))}focus(e){if(e instanceof StyledElements.Tab){if(this.tabsById[e.tabId]!==e)throw new TypeError("tab is not owned by this notebook")}else if(null==(e=this.tabsById[e]))throw new TypeError("Invalid tab id");return this.transitionsQueue.addCommand({type:"focus",tab:e})}repaint(e){return e=null!=e&&e,this.tabWrapper.repaint(),i.call(this),e?this.visibleTab&&this.visibleTab.repaint(!0):this.tabs.forEach(e=>{e.repaint(!1)}),this}_onenabled(e){e?(this.disabledLayer.remove(),this.disabledLayer=null):(this.disabledLayer=document.createElement("div"),this.disabledLayer.classList.add("se-container-disable-layer"),this.wrapperElement.appendChild(this.disabledLayer))}clear(){return this.tabs=[],this.tabsById=[],this.visibleTab=null,this.tabArea.clear(),this.contentArea.innerHTML="",i.call(this),this}addButton(e,t){if(!(e instanceof StyledElements.Button||e instanceof StyledElements.Select))throw new TypeError;switch(t=t||"right"){case"left":this.tabWrapper.west.prependChild(e,this.moveLeftButton);break;case"right":this.tabWrapper.east.appendChild(e)}return i.call(this),this}requestFullscreen(){return"requestFullscreen"in this.wrapperElement?this.wrapperElement.requestFullscreen():"msRequestFullscreen"in this.wrapperElement?this.wrapperElement.msRequestFullscreen():"mozRequestFullScreen"in this.wrapperElement?this.wrapperElement.mozRequestFullScreen():"webkitRequestFullscreen"in this.wrapperElement&&this.wrapperElement.webkitRequestFullscreen(),this}exitFullscreen(){return!0!==this.fullscreen?this:("exitFullscreen"in document?document.exitFullscreen():"msExitFullscreen"in document?document.msExitFullscreen():"mozCancelFullScreen"in document?document.mozCancelFullScreen():"webkitExitFullscreen"in document&&document.webkitExitFullscreen(),this)}destroy(){this.remove(),this.tabs=null,this.tabsById=null,this.visibleTab=null,StyledElements.StyledElement.prototype.destroy.call(this)}},e.Notebook.prototype.Button=StyledElements.Button,e.Notebook.prototype.Tab=StyledElements.Tab}(StyledElements,StyledElements.Utils),function(e,t){"use strict";e.Alternative=class extends e.Container{constructor(e,t){super(t,["hide","show"]),this.addClassName("hidden"),Object.defineProperties(this,{altId:{value:e}})}_onhidden(e){return e||this.repaint(!1),super._onhidden(e)}setVisible(e){return e?this.show():this.hide()}isVisible(){return!this.hidden}}}(StyledElements,StyledElements.Utils),function(e,t){"use strict";const n=new WeakMap,s=function(){return t.clone(n.get(this).alternatives)},i=function(){return n.get(this).alternativeList.slice(0)},l=function(e,s,i,l){let r=new Promise(e=>{l.dispatchEvent("preTransition",s,i),l.wrapperElement.classList.add("se-on-transition"),e()});switch(e){case StyledElements.Alternatives.HORIZONTAL_SLIDE:s.addClassName("slide"),i.addClassName(["slide",i.altId<s.altId?"left":"right"]).show(),r=r.then(function(){return t.timeoutPromise(Promise.all([t.waitTransition(i.get()),t.waitTransition(s.get())]),3e3,"timeout")}).then(function(){i.removeClassName("slide"),s.removeClassName("slide left right").hide()}),setTimeout(function(){s.addClassName(i.altId<s.altId?"right":"left"),i.removeClassName("left right")},10);break;case StyledElements.Alternatives.CROSS_DISSOLVE:i.addClassName("fade").show(),s.addClassName("fade in"),r=r.then(function(){return t.timeoutPromise(Promise.all([t.waitTransition(i.get()),t.waitTransition(s.get())]),3e3,"timeout")}).then(function(){i.removeClassName("fade in"),s.removeClassName("fade").hide()}),setTimeout(()=>{i.addClassName("in"),s.removeClassName("in")},10);break;default:case StyledElements.Alternatives.NONE:r=r.then(()=>{i.show(),s.hide()})}return r.then(()=>(n.get(l).visibleAlt=i,l.wrapperElement.classList.remove("se-on-transition"),l.dispatchEvent("postTransition",s,i),{in:i,out:s}))};e.Alternatives=class extends e.StyledElement{constructor(e){const r={class:"",full:!0,defaultEffect:StyledElements.Alternatives.NONE};e=t.merge(r,e),super(["preTransition","postTransition"]),this.wrapperElement=document.createElement("div"),this.wrapperElement.className=t.prependWord(e.class,"se-alternatives"),e.id&&this.wrapperElement.setAttribute("id",e.id),e.full&&this.wrapperElement.classList.add("full"),Object.defineProperties(this,{alternatives:{get:s},alternativeList:{get:i},defaultEffect:{value:e.defaultEffect,writable:!0}});n.set(this,{nextAltId:0,transitionsQueue:new StyledElements.CommandQueue(this,function(e,s){let i,r;const a=n.get(e);let o=Promise.resolve();switch(s.type){case"transit":if(i=s.inAlternative,r=e.visibleAlt,i===r)return t.callCallback(s.onComplete,e,r,i),{in:i,out:r};o=l(s.effect,r,i,e);break;case"remove":r=s.outAlternative,a.visibleAlt===r&&(a.alternativeList.length>0?((i=a.alternativeList[s.index])||(i=a.alternativeList[s.index-1]),o=l(s.effect,r,i,e)):a.visibleAlt=null),o=o.then(function(){e.wrapperElement.removeChild(r.wrapperElement)}.bind(this))}return o.then(n=>(t.callCallback(s.onComplete,e,r,i),n))}),visibleAlt:null,alternatives:{},alternativeList:[]})}repaint(e){const t=n.get(this);return null!=t.visibleAlt&&t.visibleAlt.repaint(!!e),this}createAlternative(e){const s=n.get(this),i={alternative_constructor:StyledElements.Alternative,containerOptions:{},initiallyVisible:!1};(e=t.update(i,e)).containerOptions.parentElement=this;const l=n.get(this).nextAltId++;if(e.alternative_constructor!==StyledElements.Alternative&&!(e.alternative_constructor.prototype instanceof StyledElements.Alternative))throw new TypeError;const r=new e.alternative_constructor(l,e.containerOptions);return r.parentElement=this,r.insertInto(this.wrapperElement),s.alternatives[l]=r,s.alternativeList.push(r),s.visibleAlt?e.initiallyVisible&&this.showAlternative(r):(s.visibleAlt=r,r.setVisible(!0)),r}removeAlternative(e,s){const i=n.get(this);let l;if(s=t.update({effect:this.defaultEffect,onComplete:null},s),e instanceof StyledElements.Alternative){if(l=e.altId,i.alternatives[l]!==e)throw new TypeError("alternative is not owner by this alternatives element")}else if(l=e,!(e=i.alternatives[e]))return t.callCallback(s.onComplete),Promise.resolve();delete i.alternatives[l];const r=i.alternativeList.indexOf(e);return i.alternativeList.splice(r,1),i.transitionsQueue.addCommand({effect:s.effect,index:r,type:"remove",onComplete:s.onComplete,outAlternative:e})}clear(){const e=n.get(this);return e.alternatives={},e.alternativeList=[],e.nextAltId=0,e.visibleAlt=null,this.wrapperElement.innerHTML="",this}getCurrentAlternative(){return n.get(this).visibleAlt}get visibleAlt(){return this.getCurrentAlternative()}showAlternative(e,s){const i={};s=t.update({effect:this.defaultEffect,onComplete:null},s);const l=n.get(this);if(e instanceof StyledElements.Alternative){if(l.alternatives[e.altId]!==e)throw new TypeError("Invalid alternative");i.inAlternative=e}else{if(null==l.alternatives[e])throw new TypeError("Invalid alternative");i.inAlternative=l.alternatives[e]}return i.type="transit",i.onComplete=s.onComplete,i.effect=s.effect,l.transitionsQueue.addCommand(i)}},e.Alternatives.HORIZONTAL_FLIP="horizontalflip",e.Alternatives.HORIZONTAL_SLIDE="horizontalslide",e.Alternatives.CROSS_DISSOLVE="dissolve",e.Alternatives.NONE="none"}(StyledElements,StyledElements.Utils),function(e,t){"use strict";e.HorizontalLayout=class extends e.StyledElement{constructor(e){super([]),this.options=t.merge({class:""},e),this.wrapperElement=document.createElement("div"),this.wrapperElement.className=t.appendWord(this.options.class,"se-horizontal-layout"),this.west=new StyledElements.Container({class:"se-hl-west-container"}),this.center=new StyledElements.Container({class:"se-hl-center-container"}),this.east=new StyledElements.Container({class:"se-hl-east-container"}),this.west.insertInto(this.wrapperElement),this.center.insertInto(this.wrapperElement),this.east.insertInto(this.wrapperElement)}repaint(e){this.west.repaint(e),this.center.repaint(e),this.east.repaint(e)}getWestContainer(){return this.west}getCenterContainer(){return this.center}getEastContainer(){return this.east}}}(StyledElements,StyledElements.Utils),function(e,t){"use strict";e.VerticalLayout=class extends e.StyledElement{constructor(e){super([]),this.options=t.merge({class:""},e),this.wrapperElement=document.createElement("div"),this.wrapperElement.className=t.appendWord(this.options.class,"se-vertical-layout"),this.north=new StyledElements.Container({class:"se-vl-north-container"}),this.center=new StyledElements.Container({class:"se-vl-center-container"}),this.south=new StyledElements.Container({class:"se-vl-south-container"}),this.north.insertInto(this.wrapperElement),this.center.insertInto(this.wrapperElement),this.south.insertInto(this.wrapperElement)}repaint(e){this.north.repaint(e),this.center.repaint(e),this.south.repaint(e)}}}(StyledElements,StyledElements.Utils),function(e,t){"use strict";e.BorderLayout=class extends e.StyledElement{constructor(e){super([]),e=t.merge({class:""},e),this.wrapperElement=document.createElement("div"),this.wrapperElement.className=t.appendWord(e.class,"se-border-layout"),Object.defineProperties(this,{north:{value:new StyledElements.Container({class:"se-bl-north-container"})},west:{value:new StyledElements.Container({class:"se-bl-west-container"})},center:{value:new StyledElements.Container({class:"se-bl-center-container"})},east:{value:new StyledElements.Container({class:"se-bl-east-container"})},south:{value:new StyledElements.Container({class:"se-bl-south-container"})}}),this.north.insertInto(this.wrapperElement),this.west.insertInto(this.wrapperElement),this.center.insertInto(this.wrapperElement),this.east.insertInto(this.wrapperElement),this.south.insertInto(this.wrapperElement)}repaint(e){const t=this.wrapperElement.offsetWidth,n=this.wrapperElement.offsetHeight,s=this.north.wrapperElement.offsetHeight,i=n-this.south.wrapperElement.offsetHeight;let l=i-s;l<0&&(l=0);const r=this.west.wrapperElement.offsetWidth,a=t-this.east.wrapperElement.offsetWidth;let o=a-r;o<0&&(o=0),this.west.wrapperElement.style.top=s+"px",this.west.wrapperElement.style.height=l+"px",this.center.wrapperElement.style.top=s+"px",this.center.wrapperElement.style.height=l+"px",this.center.wrapperElement.style.width=o+"px",this.center.wrapperElement.style.left=r+"px",this.east.wrapperElement.style.top=s+"px",this.east.wrapperElement.style.height=l+"px",this.east.wrapperElement.style.left=a+"px",this.south.wrapperElement.style.top=i+"px",this.north.repaint(e),this.west.repaint(e),this.center.repaint(e),this.east.repaint(e),this.south.repaint(e)}getNorthContainer(){return this.north}getWestContainer(){return this.west}getCenterContainer(){return this.center}getEastContainer(){return this.east}getSouthContainer(){return this.south}}}(StyledElements,StyledElements.Utils),function(e,t){"use strict";const n=new WeakMap,s=function(){const e=n.get(this);this.selection.forEach(function(t){t in e.current_elements&&e.current_elements[t].row.classList.add("highlight")},this)},i=function(e,t){let s,i,l,r;const a=n.get(this);null!=a.sortColumn&&((l=a.headerCells[a.sortColumn]).classList.remove("ascending"),l.classList.remove("descending")),a.sortInverseOrder=t,a.sortColumn=e,null!=a.sortColumn?(r=a.headerCells[a.sortColumn],a.sortInverseOrder?(r.classList.remove("ascending"),r.classList.add("descending")):(r.classList.remove("descending"),r.classList.add("ascending")),s=null!=(e=this.columns[a.sortColumn]).sort_id?e.sort_id:e.field,a.sortInverseOrder&&(s="-"+s),i=[s]):i=null,this.source.changeOptions({order:i})},l=function(){const e=n.get(this.widget),t=e.sortColumn===this.column&&!e.sortInverseOrder;i.call(this.widget,this.column,t)},r=function(e,t){let n,s,i;for(n="string"==typeof t?[t]:t.slice(),s=e;null!=s&&n.length>0;)s=s[i=n.splice(0,1)[0]];return null==s||n.length>0?"":s},a=function(e,t){if("relative"===e)return t.fromNow();if("calendar"===e){const e=t.format(" z");return(t.calendar()+e).trim()}return t.format(e).trim()},o=function(e,t,n){let s,i,l;s=r(e,t.field),"function"==typeof t.dateparser?s=t.dateparser(s):s instanceof Date||(s=new Date(s));const o=moment(s);null!=t.timezone&&o.tz(t.timezone);const u=null!=t.format?t.format:"relative",c=null!=t.tooltip?t.tooltip:"LLLL z",h=a(u,o),d=document.createElement("span");if(d.textContent=h,"none"!==c&&(i=o.format(c),(l=new this.Tooltip({content:i,placement:["bottom","top","right","left"]})).bind(d)),"relative"===u||"calendar"===u){const e=setInterval(function(){d.ownerDocument.body.contains(d)||clearInterval(e);const t=a(u,o);d.textContent!==t&&(d.textContent=t)},1e3)}return d},u=function(e){e.stopPropagation(),h.call(this.table,this.item,e,this.index),this.table.events.click.dispatch(this.item,e)},c=function(e){return"single"===e||"multiple"===e},h=function(e,t,s){const i=n.get(this);if(!c(i.selectionType))return;let l,r,a,o,u,h;const d=i.extractIdFunc(e);if("multiple"===i.selectionType&&(t.ctrlKey||t.metaKey)&&t.shiftKey)if(-1===(a=(r=this.source.getCurrentPage()).indexOf(i.lastSelected)))i.lastSelected=e,l=[d];else{(l=i.savedSelection.slice()).splice(l.indexOf(i.extractIdFunc(i.lastSelected)),1);const e=[];for(o=Math.min(s,a),u=Math.max(s,a),h=o;h<=u;h++)e.push(i.extractIdFunc(r[h]));l=l.concat(e),t.target.ownerDocument.defaultView.getSelection().removeAllRanges()}else if("multiple"===i.selectionType&&t.shiftKey)if(-1===(a=(r=this.source.getCurrentPage()).indexOf(i.lastSelected)))i.lastSelected=e,l=[d];else{for(l=[],o=Math.min(s,a),u=Math.max(s,a),h=o;h<=u;h++)l.push(i.extractIdFunc(r[h]));t.target.ownerDocument.defaultView.getSelection().removeAllRanges()}else if("multiple"===i.selectionType&&(t.ctrlKey||t.metaKey)){i.lastSelected=e;const t=(l=this.selection.slice()).indexOf(d);-1!==t?(i.lastSelected=null,l.splice(t,1)):l.push(d),i.savedSelection=l}else l=[d],i.lastSelected=e,i.savedSelection=l;this.select(l),this.events.select.dispatch(l)},d=function(){let e,t;const s=n.get(this);for(e=0;e<s.listeners.length;e+=1)(t=s.listeners[e]).element.removeEventListener("click",t.callback,!1);for(s.components=[],s.listeners=[],s.columnsCells=[],e=0;e<this.columns.length;e+=1)s.columnsCells[e]=[];s.tableBody.clear(),s.current_elements={}};e.ModelTable=class extends e.StyledElement{constructor(e,s){let a,o,u;const h={initialSortColumn:-1,pageSize:5,emptyMessage:t.gettext("No data available"),selectionType:"none"};a=null!=(s=t.merge(h,s)).class?t.appendWord("se-model-table full",s.class):"se-model-table full",super(["click","select"]);const p={};let m;if(n.set(this,p),p.selection=[],p.selectionType=s.selectionType,null!=s.source?m=s.source:(u={},e.forEach(e=>{const t=null!=e.sort_id?e.sort_id:e.field;u[t]=e}),m=new StyledElements.StaticPaginatedSource({pageSize:s.pageSize,sort_info:u,idAttr:s.id})),p.layout=new StyledElements.VerticalLayout({class:a}),Object.defineProperties(this,{columns:{writable:!0,value:e},emptyMessage:{writable:!0,value:s.emptyMessage},source:{writable:!1,value:m},statusBar:{get:function(){return p.statusBar}}}),this.wrapperElement=p.layout.wrapperElement,this.wrapperElement.addEventListener("click",e=>{const t=n.get(this);!c(t.selectionType)||e.shiftKey||e.ctrlKey||e.metaKey||(this.select([]),this.events.select.dispatch([]))}),p.components=[],p.listeners=[],p.tableBody=p.layout.center,p.tableBody.addClassName("se-model-table-body"),function(){const e=n.get(this);e.header=document.createElement("div"),e.header.className="se-model-table-headrow",e.headerCells=[],e.columnTemplate=[];for(let n=0;n<this.columns.length;n+=1){const s=this.columns[n],i=null!=s.label?s.label:s.field,r=document.createElement("div");r.className="se-model-table-cell","string"==typeof s.class&&r.classList.add(s.class),null!=s.width&&"css"!==s.width?e.columnTemplate.push(s.width):e.columnTemplate.push("1fr"),r.textContent=i,!1!==s.sortable&&(r.classList.add("sortable"),new this.Tooltip({content:t.interpolate(t.gettext("Sort by %(column_name)s"),{column_name:i}),placement:["bottom","top","right","left"]}).bind(r),r.callback=l.bind({widget:this,column:n}),r.addEventListener("click",r.callback,!0)),e.header.appendChild(r),e.headerCells.push(r)}e.tableBody.appendChild(e.header),e.tableBody.wrapperElement.style.gridTemplateColumns=e.columnTemplate.join(" ")}.call(this),p.statusBar=p.layout.south,p.statusBar.addClassName("se-model-table-statusrow"),p.sortColumn=null,this.source.addEventListener("requestEnd",function(e,t){if(null==t)this.reload();else{const e=n.get(this);d.call(this);const s=document.createElement("div");s.className="alert alert-danger se-model-table-msg",s.textContent=t,e.tableBody.appendChild(s)}}.bind(this)),0!==this.source.options.pageSize&&(p.paginationInterface=new StyledElements.PaginationInterface(this.source),p.statusBar.appendChild(p.paginationInterface)),-1===s.initialSortColumn){for(o=0;o<this.columns.length;o+=1)if(!1!==this.columns[o].sortable){s.initialSortColumn=o;break}-1===s.initialSortColumn&&(s.initialSortColumn=null)}else if("string"==typeof s.initialSortColumn){for(o=0;o<this.columns.length;o+=1)if(this.columns[o].field===s.initialSortColumn){s.initialSortColumn=o;break}"string"==typeof s.initialSortColumn&&(s.initialSortColumn=null)}p.current_elements={},"string"==typeof s.id?p.extractIdFunc=(e=>e[s.id]):Array.isArray(s.id)?p.extractIdFunc=(e=>r(e,s.id)):"function"==typeof s.id&&(p.extractIdFunc=s.id),p.stateFunc="function"==typeof s.stateFunc?s.stateFunc:()=>{},i.call(this,s.initialSortColumn,s.initialDescendingOrder)}get selection(){return n.get(this).selection}set selection(e){const t=n.get(this);if(!c(t.selectionType))throw new Error("Selection is disabled");if(!Array.isArray(e))throw new TypeError;if("single"===t.selectionType&&e.length>1)throw new Error('Selection is set to "single" but tried to select more than one rows.');t.selection.forEach(e=>{e in t.current_elements&&t.current_elements[e].row.classList.remove("highlight")}),t.selection=e,s.call(this)}select(e){return this.selection=null!=e?Array.isArray(e)?e:[e]:[],this}reload(){(function(e){let t,i,l,a,c,h,p,m,E,f;const b=n.get(this);for(d.call(this),b.tableBody.appendChild(b.header),t=0;t<e.length;t+=1){for(l=e[t],h=u.bind({table:this,item:l,index:t}),(a=document.createElement("div")).className="se-model-table-row",t%2==1&&a.classList.add("odd"),null!=(f=b.stateFunc(l))&&a.classList.add("se-model-table-row-"+f),i=0;i<this.columns.length;i+=1)E=this.columns[i],(c=document.createElement("div")).className="se-model-table-cell",b.columnsCells[i].push(c),"string"==typeof E.class&&c.classList.add(E.class),E.contentBuilder?m=E.contentBuilder(l):"date"===E.type?""===r(l,E.field)?m="":(p||(p=new Date),m=o.call(this,l,E,p)):"number"===E.type?""!==(m=r(l,E.field))&&E.unit&&(m=m+" "+E.unit):m=r(l,E.field),null==m&&(m=""),"string"==typeof m?c.textContent=m:"number"==typeof m||"boolean"==typeof m?c.textContent=""+m:m instanceof StyledElements.StyledElement?(m.insertInto(c),b.components.push(m)):c.appendChild(m),c.addEventListener("click",h,!1),b.listeners.push({element:c,callback:h}),a.appendChild(c),"function"==typeof b.extractIdFunc&&(b.current_elements[b.extractIdFunc(l)]={row:a,data:l});b.tableBody.appendChild(a)}0===e.length&&this.source.currentPage&&((a=document.createElement("div")).className="alert alert-info se-model-table-msg",a.textContent=this.emptyMessage,b.tableBody.appendChild(a)),s.call(this)}).call(this,this.source.getCurrentPage())}destroy(){let e,t;const s=n.get(this);for(e=0;e<s.headerCells.length;e+=1)(t=s.headerCells[e]).callback&&(t.removeEventListener("click",t.callback,!0),t.callback=null);return d.call(this),s.layout.destroy(),s.layout=null,s.paginationInterface&&(s.paginationInterface.destroy(),s.paginationInterface=null),this.source.destroy(),this}},e.ModelTable.prototype.Tooltip=StyledElements.Tooltip}(StyledElements,StyledElements.Utils),function(e,t){"use strict";const n={initialContent:""};Object.freeze(n),e.EditableElement=class extends e.StyledElement{constructor(e){super(["change"]),e=t.merge({},n,e),this.wrapperElement=document.createElement("span"),this.setTextContent(e.initialContent),this._onFocus=function(e){const t=document.createRange();t.selectNodeContents(this.wrapperElement);const n=window.getSelection();n.removeAllRanges(),n.addRange(t),document.addEventListener("mousedown",this._onBlur,!1)}.bind(this),this._onKeydown=function(e){13===e.keyCode?this._onBlur():27===e.keyCode&&(this.wrapperElement.textContent=this._prev_content,this._onBlur())}.bind(this),this._onBlur=function(e){if(!this.wrapperElement.hasAttribute("contenteditable"))return;document.removeEventListener("mousedown",this._onBlur,!1);const t=this.wrapperElement.textContent;this.wrapperElement.textContent=t,this._prev_content!==t&&this.dispatchEvent("change",t),this.disableEdition()}.bind(this),this.wrapperElement.addEventListener("focus",this._onFocus,!0),this.wrapperElement.addEventListener("keydown",this._onKeydown,!0),this.wrapperElement.addEventListener("blur",this._onBlur,!0)}get editing(){return this.wrapperElement.hasAttribute("contenteditable")}disableEdition(){this.wrapperElement.hasAttribute("contenteditable")&&(this.wrapperElement.removeEventListener("mousedown",t.stopPropagationListener,!0),this.wrapperElement.removeAttribute("contenteditable"),this.wrapperElement.blur(),this.wrapperElement.scrollLeft=0,this.wrapperElement.scrollTop=0)}enableEdition(){this.wrapperElement.hasAttribute("contenteditable")||(this.wrapperElement.addEventListener("mousedown",t.stopPropagationListener,!0),this.wrapperElement.setAttribute("contenteditable","true"),this._prev_content=this.wrapperElement.textContent),this.wrapperElement.focus()}setTextContent(e){return this.wrapperElement.textContent=e,this}destroy(){this.wrapperElement.removeEventListener("focus",this._onFocus,!0),this.wrapperElement.removeEventListener("keydown",this._onKeydown,!0),this.wrapperElement.removeEventListener("blur",this._onBlur,!0),this._onFocus=null,this._onKeydown=null,this._onBlur=null,super.destroy()}}}(StyledElements,StyledElements.Utils),function(e,t){"use strict";e.HiddenField=class extends e.InputElement{constructor(e){super((e=t.merge({initialValue:"",class:""},e)).initialValue,[]),this.wrapperElement=document.createElement("div"),this.wrapperElement.className=t.prependWord(e.class,"styled_hidden_field"),this.inputElement=document.createElement("input"),this.inputElement.setAttribute("type","hidden"),null!=e.name&&this.inputElement.setAttribute("name",e.name),null!=e.id&&this.wrapperElement.setAttribute("id",e.id),this.inputElement.setAttribute("value",e.initialValue),this.wrapperElement.appendChild(this.inputElement)}}}(StyledElements,StyledElements.Utils),function(e,t){"use strict";e.ButtonsGroup=class extends e.InputElement{constructor(e){super("",["change"]),Object.defineProperty(this,"name",{value:e}),this.buttons=[]}insertButton(e){return this.buttons[this.buttons.length]=e,e.addEventListener("change",()=>{this.dispatchEvent("change")}),this}getValue(){if(this.buttons[0]instanceof StyledElements.CheckBox){const e=[];return this.buttons.forEach(t=>{t.inputElement.checked&&e.push(t.getValue())}),e}for(let e=0;e<this.buttons.length;e++)if(this.buttons[e].inputElement.checked)return this.buttons[e].getValue()}setValue(e){return null==e?e=[]:"string"==typeof e&&(e=[e]),this.buttons.forEach(t=>{t.setValue(-1!==e.indexOf(t.inputElement.value))}),this}reset(){return this.buttons.forEach(e=>{e.reset()}),this}getSelectedButtons(){if(0===this.buttons.length)return[];if(this.buttons[0]instanceof StyledElements.CheckBox){const e=[];for(let t=0;t<this.buttons.length;t++)this.buttons[t].inputElement.checked&&(e[e.length]=this.buttons[t]);return e}for(let e=0;e<this.buttons.length;e++)if(this.buttons[e].inputElement.checked)return[this.buttons[e]];return[]}}}(StyledElements,StyledElements.Utils),function(e,t){"use strict";e.CheckBox=class extends e.InputElement{constructor(e){"initiallyChecked"in(e=t.merge({initialValue:!1,class:"",group:null,secondInput:null,value:!0},e))&&(e.initialValue=e.initiallyChecked),super(e.initialValue,["change"]),this.wrapperElement=document.createElement("input"),this.wrapperElement.className="checkbox",this.wrapperElement.setAttribute("type","checkbox"),this.inputElement=this.wrapperElement,null!=e.name&&this.inputElement.setAttribute("name",e.name),null!=e.id&&this.wrapperElement.setAttribute("id",e.id),this.checkedValue=e.value,this.inputElement.setAttribute("value",e.value),this.secondInput=e.secondInput,this.setValue(e.initialValue),e.group instanceof StyledElements.ButtonsGroup?(this.wrapperElement.setAttribute("name",e.group.name),e.group.insertButton(this)):"string"==typeof e.group&&this.wrapperElement.setAttribute("name",e.group),this.inputElement.addEventListener("mousedown",t.stopPropagationListener,!0),this.inputElement.addEventListener("click",t.stopPropagationListener,!0),this.inputElement.addEventListener("change",()=>{this.enabled&&(null!=this.secondInput&&this.secondInput.setDisabled(!this.inputElement.checked),this.dispatchEvent("change"))},!0)}reset(){this.setValue(this.defaultValue)}getValue(){return!0===this.checkedValue&&null==this.secondInput?this.inputElement.checked:null==this.secondInput?this.inputElement.checked?this.checkedValue:null:this.secondInput.getValue()}setValue(e){this.inputElement.checked=null!=e&&!1!==e,null!=this.secondInput&&(this.secondInput.setDisabled(!this.inputElement.checked),this.inputElement.checked&&this.secondInput.setValue(e))}}}(StyledElements,StyledElements.Utils),function(e,t){"use strict";e.RadioButton=class extends e.InputElement{constructor(e){super((e=t.merge({initiallyChecked:!1,class:"",group:null,value:null},e)).initiallyChecked,["change"]),this.wrapperElement=document.createElement("input"),this.wrapperElement.setAttribute("type","radio"),null!=e.value&&this.wrapperElement.setAttribute("value",e.value),this.inputElement=this.wrapperElement,null!=e.name&&this.inputElement.setAttribute("name",e.name),null!=e.id&&this.wrapperElement.setAttribute("id",e.id),!0===e.initiallyChecked&&this.inputElement.setAttribute("checked",!0),e.group instanceof StyledElements.ButtonsGroup?(this.wrapperElement.setAttribute("name",e.group.name),e.group.insertButton(this)):"string"==typeof e.group&&this.wrapperElement.setAttribute("name",e.group),this.inputElement.addEventListener("mousedown",t.stopPropagationListener,!0),this.inputElement.addEventListener("click",t.stopPropagationListener,!0),this.inputElement.addEventListener("change",()=>{this.enabled&&this.dispatchEvent("change")},!0)}insertInto(e,t){const n=this.inputElement.checked;StyledElements.StyledElement.prototype.insertInto.call(this,e,t),this.inputElement.checked=n}reset(){return this.inputElement.checked=this.defaultValue,this}setValue(e){return this.inputElement.checked=e,this}}}(StyledElements,StyledElements.Utils),function(e,t){"use strict";e.InputInterface=class extends e.StyledElement{constructor(e,t){if(null==e)throw new TypeError("missing fieldId parameter");super([]),t.name=e,this._fieldId=e,this._initialValue=t.initialValue,this._defaultValue=t.defaultValue,this._label=t.label,Object.defineProperties(this,{id:{value:e},required:{value:"required"in t&&!!t.required}}),this._readOnly=!!t.readOnly,this._hidden=!!t.hidden,t.description?this._description=t.description:this._description=t.label}repaint(){this.inputElement.repaint()}getValue(){return this.inputElement.getValue()}setValue(e){this.isValidValue(e)&&this._setValue(e)}getLabel(){return this._label}getDescription(){return this._description}getDefaultValue(){return this._defaultValue}isEmpty(){return this._isEmptyValue(this.getValue())}_isEmptyValue(e){return""===e||null==e}_normalize(e){return null==e?"":(""+e).trim()}_checkValue(t){return e.InputValidationError.NO_ERROR}checkValue(e){if(e=void 0===e?this.getValue():this._normalize(e),!(this instanceof StyledElements.SelectInputInterface)){if(this.required&&this._isEmptyValue(e))return StyledElements.InputValidationError.REQUIRED_ERROR;if(!this.required&&this._isEmptyValue(e))return StyledElements.InputValidationError.NO_ERROR}return this._checkValue(e)}validate(){null!=this.timeout&&clearTimeout(this.timeout);const e=this.checkValue();this._setError(e!==StyledElements.InputValidationError.NO_ERROR)}isValidValue(e){return this.checkValue(e)===StyledElements.InputValidationError.NO_ERROR}_setValue(e){e=this._normalize(e),this.inputElement.setValue(e)}_setError(e){e?this.inputElement.wrapperElement.classList.add("error"):this.inputElement.wrapperElement.classList.remove("error")}resetToDefault(){this._setError(!1),this._setValue(this._defaultValue)}reset(){this._setError(!1),this._setValue(this._initialValue)}focus(){this.inputElement.focus()}setDisabled(e){this.inputElement.setDisabled(this._readOnly||e)}enable(){this.setDisabled(!1)}disable(){this.setDisabled(!0)}insertInto(e){this.inputElement.insertInto(e)}assignDefaultButton(e){}}}(StyledElements,StyledElements.Utils),function(e,t){"use strict";e.TextInputInterface=class extends e.InputInterface{constructor(e,t){super(e,t),this.inputElement=new StyledElements.TextField(t),this.inputElement.addEventListener("change",()=>{null!=this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout(this.validate.bind(this),700)}),this.inputElement.addEventListener("blur",this.validate.bind(this))}static parse(e){return e}static stringify(e){return e}assignDefaultButton(e){this.inputElement.addEventListener("submit",function(){e.click()})}}}(StyledElements,StyledElements.Utils),function(e,t){"use strict";e.InputValidationError={NO_ERROR:0,REQUIRED_ERROR:1,URL_ERROR:2,EMAIL_ERROR:3,ID_ERROR:4,COLOR_ERROR:5,BOOLEAN_ERROR:6,VERSION_ERROR:7,OUT_OF_RANGE_ERROR:8},e.ValidationErrorManager=class{constructor(){this.fieldsWithErrorById={}}_addValidationError(e,t){void 0===this.fieldsWithErrorById[e]&&(this.fieldsWithErrorById[e]=[]),this.fieldsWithErrorById[e].push(t)}validate(e){const t=e.checkValue();t!==StyledElements.InputValidationError.NO_ERROR?(e._setError(!0),this._addValidationError(t,e.getLabel())):e._setError(!1)}_buildErrorMsg(e){let n;switch(e=parseInt(e,10)){case StyledElements.InputValidationError.REQUIRED_ERROR:n=StyledElements.Utils.gettext("The following required fields are empty: %(fields)s.");break;case StyledElements.InputValidationError.URL_ERROR:n=StyledElements.Utils.gettext("The following fields do not contain a valid URL: %(fields)s.");break;case StyledElements.InputValidationError.EMAIL_ERROR:n=StyledElements.Utils.gettext("The following fields do not contain a valid E-Mail address: %(fields)s.");break;case StyledElements.InputValidationError.VERSION_ERROR:n=StyledElements.Utils.gettext("The following field do not contain a valid version number: %(fields)s.");break;case StyledElements.InputValidationError.ID_ERROR:n=StyledElements.Utils.gettext("The following fields contain invalid characters: %(fields)s.");break;case StyledElements.InputValidationError.COLOR_ERROR:n=StyledElements.Utils.gettext("The following fields do not contain a valid color value: %(fields)s.");break;case StyledElements.InputValidationError.OUT_OF_RANGE_ERROR:n=StyledElements.Utils.gettext("The following fields does contain an out of range value: %(fields)s.")}let s="";for(let t=0;t<this.fieldsWithErrorById[e].length;t+=1)s+=", "+this.fieldsWithErrorById[e][t];return s=s.substring(2),t.interpolate(n,{fields:s})}toHTML(){const e=[];for(const t in this.fieldsWithErrorById)this.fieldsWithErrorById.hasOwnProperty(t)&&e.push(this._buildErrorMsg(t));return e}},e.PasswordInputInterface=class extends e.InputInterface{constructor(e,t){super(e,t),this.inputElement=new StyledElements.PasswordField(t)}},e.PasswordInputInterface.parse=StyledElements.TextInputInterface.parse,e.PasswordInputInterface.stringify=StyledElements.TextInputInterface.stringify,e.ListInputInterface=class extends e.InputInterface{constructor(e,t){super(e,t),this.inputElement=new StyledElements.List(t)}static parse(e){return JSON.parse(e)}static stringify(e){return JSON.stringify(e)}_normalize(e){Array.isArray(e)||(e=[])}_setValue(e){this.inputElement.cleanSelection(),this.inputElement.addSelection(e)}getValue(){return this.inputElement.getSelection()}isEmpty(){return 0===this.getValue().length}},e.NumberInputInterface=class extends e.InputInterface{constructor(e,t){super(e,t),this.inputElement=new StyledElements.NumericField(t)}static parse(e){return Number(e)}_normalize(e){return null==e?0:Number(e)}_checkValue(e){return!Number.isFinite(e)||e<this.inputElement.options.min||e>this.inputElement.options.max?StyledElements.InputValidationError.OUT_OF_RANGE_ERROR:StyledElements.InputValidationError.NO_ERROR}},e.LongTextInputInterface=class extends e.InputInterface{constructor(e,t){super(e,t),this.inputElement=new StyledElements.TextArea(t),this.events.blur=this.inputElement.events.blur}},e.LongTextInputInterface.prototype.parse=StyledElements.TextInputInterface.prototype.parse,e.LongTextInputInterface.prototype.stringify=StyledElements.TextInputInterface.prototype.stringify,e.URLInputInterface=class extends e.TextInputInterface{constructor(e,t){super(e,t),this.inputElement.type="url"}_checkValue(t){return""!==this.inputElement.validationMessage?e.InputValidationError.NO_ERROR:e.InputValidationError.URL_ERROR}},e.EMailInputInterface=class extends e.TextInputInterface{constructor(e,t){super(e,t),this.inputElement.type="email"}_checkValue(t){return""!==this.inputElement.validationMessage?e.InputValidationError.NO_ERROR:e.InputValidationError.EMAIL_ERROR}},e.BooleanInputInterface=class extends e.InputInterface{constructor(e,t){super(e,t),"string"==typeof t.initialValue?t.initiallyChecked="true"===t.initialValue.toLowerCase():"boolean"==typeof t.initialValue&&(t.initiallyChecked=t.initialValue),this.inputElement=new StyledElements.CheckBox(t)}static parse(e){return"true"===(""+e).trim().toLowerCase()}static stringify(e){return""+e}isEmpty(){return!1}_normalize(e){return!!e}_checkValue(e){return"boolean"==typeof e?StyledElements.InputValidationError.NO_ERROR:StyledElements.InputValidationError.BOOLEAN_ERROR}},e.SelectInputInterface=class extends e.InputInterface{constructor(e,t){if("required"in t||(t.required=!0),super(e,t),"function"==typeof t.entries)this._update=t.entries;else if(t.initialEntries&&!this.required){let e,n=!1;for(e=0;e<t.initialEntries.length;e+=1)if(this._isEmptyValue(t.initialEntries[e].value)){n=!0;break}n||(t.initialEntries=[{label:"---------",value:null}].concat(t.initialEntries))}this.inputElement=new StyledElements.Select(t)}static parse(e){return e}static stringify(e){return""+e}_setValue(e){let t;this._update&&(this.inputElement.clear(),t=this._update(),this.required||(t=[{label:"---------",value:null}].concat(t)),this.inputElement.addEntries(t)),this.inputElement.setValue(e)}_checkValue(e){let t;if("string"!=typeof e)try{t=this.inputElement.idFunc(e)}catch(e){}else t=e;return"string"==typeof t&&t in this.inputElement.optionValues?StyledElements.InputValidationError.NO_ERROR:StyledElements.InputValidationError.OUT_OF_RANGE_ERROR}},e.HiddenInputInterface=class extends e.InputInterface{constructor(e,t){super(e,t),this.inputElement=new StyledElements.HiddenField(t)}},e.ButtonGroupInputInterface=class extends e.InputInterface{constructor(e,t){let n,s,i,l,r;switch(super(e,t),this.inputElement=new StyledElements.ButtonsGroup(e),this.wrapperElement=document.createElement("div"),this.wrapperElement.className="button_group",t.kind){case"radio":n=StyledElements.RadioButton;break;case"checkbox":n=StyledElements.CheckBox;break;default:throw new Error}for(i=0;i<t.buttons.length;i+=1)s=t.buttons[i],(r=document.createElement("label")).className=t.kind,(l=new n({group:this.inputElement,value:s.value,secondInput:s.secondInput})).insertInto(r),r.appendChild(document.createTextNode(s.label)),s.secondInput&&s.secondInput.insertInto(r),this.wrapperElement.appendChild(r);"initialValue"in t&&this.inputElement.setValue(t.initialValue)}insertInto(e){e.appendChild(this.wrapperElement)}_setValue(e){this.inputElement.setValue(e)}_setError(e){}},e.FileInputInterface=class extends e.InputInterface{constructor(e,t){super(e,t),this.inputElement=new StyledElements.FileField(t)}getValue(){return this.inputElement.getValue()}_setValue(e){}_setError(e){}setDisabled(e){this.inputElement.disabled=!!e}},e.FieldSetInterface=class extends e.InputInterface{constructor(e,t,n){this.form=new StyledElements.Form(t.fields,{factory:n,useHtmlForm:!1,acceptButton:!1,cancelButton:!1,legend:!1})}repaint(){return this.form.repaint()}insertInto(e){this.form.insertInto(e)}getValue(){return this.form.getData()}_setValue(e){return this.form.setData(e)}_setError(e){}}}(StyledElements,StyledElements.Utils),function(e,t){"use strict";e.MultivaluedInputInterface=class extends StyledElements.InputInterface{constructor(e,t){super(e,{}),this.entries=[],this.fields=t.fields,this.inputElement=new StyledElements.Container,this.wrapperElement=this.inputElement.wrapperElement,this.addEntry()}addEntry(){const e={wrapper:document.createElement("div")},t={"":{type:"lineLayout",fields:this.fields}};return e.form=new StyledElements.Form(t,{useHtmlForm:!1,acceptButton:!1,cancelButton:!1,legend:!1}),e.form.wrapperElement.style.display="inline-block",e.form.wrapperElement.style.verticalAlign="middle",e.form.insertInto(e.wrapper),e.addRowButton=new StyledElements.Button({class:"se-add-item-btn",iconClass:"fas fa-plus"}),e.addRowButton.addEventListener("click",()=>{this.addEntry()}).insertInto(e.wrapper),e.removeRowButton=new StyledElements.Button({class:"se-remove-item-btn",iconClass:"fas fa-minus",state:"danger"}),e.removeRowButton.addEventListener("click",()=>{n.call(this,e)}),e.removeRowButton.insertInto(e.wrapper),this.entries.push(e),this.wrapperElement.appendChild(e.wrapper),e}clear(){return this.entries.forEach(e=>{this.wrapperElement.removeChild(e.wrapper),e.form.destroy()}),this.entries=[],this}getValue(){return this.entries.map(e=>e.form.getData())}static parse(e){return JSON.parse(e)}_setValue(e){return this.clear(),e instanceof Array||(e=[]),e.forEach(e=>{this.addEntry().form.setData(e)}),0===this.entries.length&&this.addEntry(),this}_setError(e){return this}};const n=function(e){this.wrapperElement.removeChild(e.wrapper),t.removeFromArray(this.entries,e),e.form.destroy(),0===this.entries.length&&this.addEntry()}}(StyledElements,StyledElements.Utils),function(e,t){"use strict";const n=/^([1-9]\d*|0)(?:\.([1-9]\d*|0))*$/;e.VersionInputInterface=class extends e.TextInputInterface{constructor(e,t){null==t&&(t={}),null==t.placeholder&&(t.placeholder="1.0"),super(e,t)}_checkValue(t){return e.InputValidationError[null!=t.match(n)?"NO_ERROR":"VERSION_ERROR"]}}}(StyledElements,StyledElements.Utils),function(){"use strict";const e={boolean:StyledElements.BooleanInputInterface,text:StyledElements.TextInputInterface,version:StyledElements.VersionInputInterface,password:StyledElements.PasswordInputInterface,hidden:StyledElements.HiddenInputInterface,list:StyledElements.ListInputInterface,number:StyledElements.NumberInputInterface,longtext:StyledElements.LongTextInputInterface,url:StyledElements.URLInputInterface,email:StyledElements.EMailInputInterface,select:StyledElements.SelectInputInterface,buttons:StyledElements.ButtonGroupInputInterface,file:StyledElements.FileInputInterface,fieldset:StyledElements.FieldSetInterface,multivalued:StyledElements.MultivaluedInputInterface};StyledElements.InputInterfaceFactory=function(){const t=StyledElements.Utils.clone(e);this.createInterface=function(e,n){const s=t[null!=n.type?n.type:"text"];if(null==s)throw new Error(n.type);const i=new s(e,n,this);return n.initiallyDisabled&&i.disable(),i},this.addFieldType=function(e,n){if(!(n.prototype instanceof StyledElements.InputInterface))throw new TypeError;if(void 0!==t[e])throw new Error;t[e]=n},this.parse=function(e,n){if(null==t[e])throw new TypeError("Invalid data type");return t[e].parse(n)},this.stringify=function(e,n){if(null==t[e])throw new TypeError("Invalid data type");return t[e].stringify(n)}}}(),function(){"use strict";StyledElements.DefaultInputInterfaceFactory=new StyledElements.InputInterfaceFactory}(),function(e,t){"use strict";const n=function(e){const t=[];for(const n in e){const s=e[n];"name"in s||(s.name=n),t.push(s)}return t},s=function(e){let t,n;if(this.msgElement.innerHTML="",e.length>0){for(t=0;t<e.length;t+=1)(n=document.createElement("p")).textContent=e[t],this.msgElement.appendChild(n);this.msgElement.style.display=""}else this.msgElement.style.display="none"};e.Form=class extends e.StyledElement{constructor(i,l){const r={readOnly:!1,buttonArea:null,setdefaultsButton:!1,resetButton:!1,acceptButton:!0,cancelButton:!0,useHtmlForm:!0,factory:e.DefaultInputInterfaceFactory};if(l&&l.readOnly&&(r.acceptButton=!1,r.cancelButton=!1),l=t.merge({},r,l),super(["submit","cancel"]),null==i||"object"!=typeof i)throw new TypeError("invalid fields parameter");Array.isArray(i)||(i=n(i)),this.setdefaultsButton=null,l.setdefaultsButton instanceof e.Button?this.setdefaultsButton=l.setdefaultsButton:!0===l.setdefaultsButton&&(this.setdefaultsButton=new e.Button({usedInForm:l.useHtmlForm,text:t.gettext("Set Defaults")})),this.resetButton=null,l.resetButton instanceof e.Button?this.resetButton=l.resetButton:!0===l.resetButton&&(this.resetButton=new e.Button({usedInForm:l.useHtmlForm,text:t.gettext("Reset")})),this.acceptButton=null,l.acceptButton instanceof e.Button?this.acceptButton=l.acceptButton:!0===l.acceptButton&&(this.acceptButton=new e.Button({usedInForm:l.useHtmlForm,class:"btn-primary",text:t.gettext("Accept")})),this.cancelButton=null,l.cancelButton instanceof e.Button?this.cancelButton=l.cancelButton:!0===l.cancelButton&&(this.cancelButton=new e.Button({usedInForm:l.useHtmlForm,text:t.gettext("Cancel")})),this.childComponents=[],this.readOnly=l.readOnly,this.fields={},this.fieldList=i,this.focusField=i.length>0?i[0].name:null,this.fieldInterfaces={},this.factory=l.factory;const a=document.createElement("div");let o;l.useHtmlForm?(this.wrapperElement=document.createElement("form"),this.wrapperElement.addEventListener("submit",function(e){e.preventDefault()},!0),this.wrapperElement.appendChild(a)):this.wrapperElement=a,a.appendChild(this.pBuildFieldTable(i)),this.wrapperElement.className="styled_form",this.msgElement=document.createElement("div"),this.msgElement.className="alert alert-error",a.appendChild(this.msgElement),s.call(this,[]),null!=l.buttonArea?o=l.buttonArea:!1===l.acceptButton&&!1===l.cancelButton||((o=document.createElement("div")).className="buttons",a.appendChild(o)),null!=this.setdefaultsButton&&(this.setdefaultsButton.addEventListener("click",this.defaults.bind(this)),this.setdefaultsButton.insertInto(o)),null!=this.resetButton&&(this.resetButton.addEventListener("click",this.reset.bind(this)),this.resetButton.insertInto(o)),null!=this.acceptButton&&(this.acceptButton.addEventListener("click",function(){if(this.is_valid()){const e=this.getData();this.dispatchEvent("submit",e)}}.bind(this)),this.acceptButton.insertInto(o)),null!=this.cancelButton&&(this.cancelButton.addEventListener("click",function(){this.dispatchEvent("cancel")}.bind(this)),this.cancelButton.insertInto(o))}repaint(e){let t;for(t=0;t<this.childComponents.length;t+=1)this.childComponents[t].repaint(e);for(t in this.fieldInterfaces)this.fieldInterfaces[t].repaint();return this}pBuildFieldGroups(e){const t=new StyledElements.Notebook({full:!1});return this.childComponents.push(t),e.forEach(e=>{const n=t.createTab({label:e.shortTitle,closable:!1});if(n.addEventListener("show",this.repaint.bind(this)),!0===e.nested){const e={name:e.name,type:"fieldset",fields:e.fields},t=this.factory.createInterface(e.name,e);t.assignDefaultButton(this.acceptButton),this.fieldInterfaces[e.name]=t,this.fields[e.name]=e,n.appendChild(t)}else n.appendChild(this.pBuildFieldTable(e.fields))}),t.wrapperElement}pBuildFieldTable(e){if(e[0]&&"group"===e[0].type)return this.pBuildFieldGroups(e);const t=document.createElement("table");t.setAttribute("cellspacing","0"),t.setAttribute("cellpadding","0");const s=document.createElement("tbody");return t.appendChild(s),e.forEach(function(e){let t;const i=e.name,l=s.insertRow(-1);switch(e.type){case"columnLayout":(t=l.insertCell(-1)).setAttribute("colspan",2),function(e,t){const n=document.createElement("table");n.setAttribute("cellspacing","0"),n.setAttribute("cellpadding","0");const s=document.createElement("tbody");n.appendChild(s);const i=s.insertRow(-1);e.columns.forEach(e=>{i.insertCell(-1).appendChild(this.pBuildFieldTable(e))}),t.appendChild(n)}.call(this,e,t);break;case"lineLayout":(t=l.insertCell(-1)).setAttribute("colspan",2),function(e,t){n(e.fields).forEach(function(e){const n=e.name,s=this.factory.createInterface(n,e);s.assignDefaultButton(this.acceptButton),s.insertInto(t);let i=null;s.wrapperElement&&s.wrapperElement.wrapperElement?i=s.wrapperElement.wrapperElement:s.inputElement&&s.inputElement.wrapperElement&&(i=s.inputElement.wrapperElement),i&&(i.style.display="inline-block",i.style.verticalAlign="middle"),this.fieldInterfaces[n]=s,this.fields[n]=e},this)}.call(this,e,t);break;case"hidden":l.className="hidden";default:(function(e,t,n){let s,i,l,r,a,o;if("separator"===t.type)return(s=n.insertCell(-1)).setAttribute("colspan","2"),i=document.createElement("hr"),void s.appendChild(i);if("label"===t.type)return(l=n.insertCell(-1)).setAttribute("colspan","2"),l.addClassName("label-row"),t.url?((r=document.createElement("a")).setAttribute("href",t.url),r.setAttribute("target","_blank")):r=document.createElement("label"),r.appendChild(document.createTextNode(t.label)),void l.appendChild(r);const u=this.factory.createInterface(e,t),c=n.insertCell(-1);c.classList.add("label-cell"),(r=document.createElement("label")).textContent=t.label,c.appendChild(r),null!=t.description&&(o=new StyledElements.Tooltip({content:t.description,placement:["right","bottom","top","left"]})).bind(r),t.required&&!this.readOnly&&((a=document.createElement("span")).appendChild(document.createTextNode("*")),a.className="required_mark",c.appendChild(a));const h=document.createElement("td");n.appendChild(h),u.assignDefaultButton(this.acceptButton),u.insertInto(h),(this.readOnly||u._readOnly)&&u.setDisabled(!0),this.fieldInterfaces[e]=u,this.fields[e]=t}).call(this,i,e,l)}},this),t}extraValidation(e){return[]}getData(){const e={};for(const t in this.fieldInterfaces){const n=this.fieldInterfaces[t];e[t]=n.getValue()}return e}setData(e){let t,n;if("object"!=typeof e&&void 0!==e)throw new TypeError;if(s.call(this,[]),null!=e)for(n in this.fieldInterfaces)(t=this.fieldInterfaces[n])._setValue(e[n]);else for(n in this.fields)(t=this.fieldInterfaces[n]).reset();return this}update(e){let t,n;if(null==e||"object"!=typeof e)throw new TypeError("Invalid data value");for(n in s.call(this,[]),this.fieldInterfaces)n in e&&(t=this.fieldInterfaces[n])._setValue(e[n]);return this}is_valid(){const e=new StyledElements.ValidationErrorManager;for(const t in this.fieldInterfaces)e.validate(this.fieldInterfaces[t]);const t=this.extraValidation(this.fields);let n=e.toHTML();return null!==t&&(n=n.concat(t)),s.call(this,n),0===n.length}reset(){return this.setData()}defaults(){let e,t;for(t in s.call(this,[]),this.fields)(e=this.fieldInterfaces[t])._setValue(e._defaultValue);return this}destroy(){let e=0;for(e=0;e<this.childComponents.length;e+=1)this.childComponents[e].destroy();this.childComponents=null,this.setdefaultsButton&&(this.setdefaultsButton.destroy(),this.setdefaultsButton=null),this.resetButton&&(this.resetButton.destroy(),this.resetButton=null),this.acceptButton&&(this.acceptButton.destroy(),this.acceptButton=null),this.cancelButton&&(this.cancelButton.destroy(),this.cancelButton=null)}_onenabled(e){let t,n;for(t in this.fieldInterfaces)(n=this.fieldInterfaces[t]).setDisabled(!e||this.readOnly||n._readOnly);null!=this.resetButton&&(this.resetButton.enabled=e),null!=this.setdefaultsButton&&(this.setdefaultsButton.enabled=e),null!=this.acceptButton&&(this.acceptButton.enabled=e),null!=this.cancelButton&&(this.cancelButton.enabled=e)}focus(){const e=this.fieldInterfaces[this.focusField];return e&&e.focus(),this}displayMessage(e){s.call(this,[e])}insertInto(e,t){super.insertInto(e,t),this.repaint()}}}(StyledElements,StyledElements.Utils),function(e,t){"use strict";const n=new StyledElements.GUIBuilder,s=function(){this.source.currentPage<=1?(this.prevBtn.disable(),this.firstBtn.disable()):(this.prevBtn.enable(),this.firstBtn.enable()),this.source.currentPage>=this.source.totalPages?(this.nextBtn.disable(),this.lastBtn.disable()):(this.nextBtn.enable(),this.lastBtn.enable())};e.PaginationInterface=class extends e.StyledElement{constructor(e,i){const l={layout:t.gettext(n.DEFAULT_OPENING+'<div class="se-input-group"><t:firstBtn/><t:prevBtn/><div class="se-box">Page: <t:currentPage/>/<t:totalPages/></div><t:nextBtn/><t:lastBtn/></div>'+n.DEFAULT_CLOSING),autoHide:!1};i=t.merge(l,i),super([]),this.autoHide=i.autoHide,this.source=e,this.wrapperContainer=new StyledElements.Container({class:"pagination"}),this.wrapperElement=this.wrapperContainer.wrapperElement,this.firstBtn=new StyledElements.Button({class:"btn-first-page",iconClass:"fas fa-step-backward fa-fw"}),this.firstBtn.addEventListener("click",e.goToFirst.bind(e)),this.prevBtn=new StyledElements.Button({class:"btn-previous-page",iconClass:"fas fa-chevron-left fa-fw"}),this.prevBtn.addEventListener("click",e.goToPrevious.bind(e)),this.nextBtn=new StyledElements.Button({class:"btn-next-page",iconClass:"fas fa-chevron-right fa-fw"}),this.nextBtn.addEventListener("click",e.goToNext.bind(e)),this.lastBtn=new StyledElements.Button({class:"btn-last-page",iconClass:"fas fa-step-forward fa-fw"}),this.lastBtn.addEventListener("click",e.goToLast.bind(e)),this.currentPageLabel=document.createElement("span"),this.currentPageLabel.classList.add("current-page"),this.totalPagesLabel=document.createElement("span"),this.totalPagesLabel.classList.add("total-pages"),this.totalCountLabel=document.createElement("span"),this.totalCountLabel.classList.add("total-count"),this.layout=i.layout,this.currentPageLabel.textContent=this.currentPage+1,this.totalPagesLabel.textContent=this.totalPages,s.call(this),this.source.addEventListener("requestEnd",function(e){this.autoHide&&1===this.source.totalPages?this.wrapperElement.style.display="none":this.wrapperElement.style.display="",this.totalPagesLabel.textContent=this.source.totalPages,this.currentPageLabel.textContent=this.source.currentPage,this.totalCountLabel.textContent=this.source.totalCount,s.call(this)}.bind(this))}set layout(e){const t={firstBtn:this.firstBtn,prevBtn:this.prevBtn,nextBtn:this.nextBtn,lastBtn:this.lastBtn,currentPage:this.currentPageLabel,totalPages:this.totalPagesLabel,totalCount:this.totalCountLabel},s=n.parse(e,t);this.wrapperContainer.clear().appendChild(s)}changeLayout(e){this.layout=e}}}(StyledElements,StyledElements.Utils),function(e,t){"use strict";const n=new WeakMap,s=new StyledElements.GUIBuilder,i=function(e,t){const s=n.get(t);s.update_popover_visibility_bound=function(e){"visible"in e&&n.get(this).element.classList.toggle("hidden",!e.visible)}.bind(t),e.contextManager.addCallback(s.update_popover_visibility_bound),s.on_widget_unload=function(e,t){e.hide()}.bind(null,t),e.addEventListener("unload",s.on_widget_unload)},l=function(e,t,n){switch(e.classList.remove("top","right","bottom","left"),e.style.top="",e.style.left="",e.style.bottom="",e.style.right="",e.classList.add(n),n){case"top":e.style.left=t.left+(t.width-e.offsetWidth)/2+"px",e.style.top=t.top-e.offsetHeight+"px";break;case"right":e.style.left=t.right+"px",e.style.top=t.top+(t.height-e.offsetHeight)/2+"px";break;case"bottom":e.style.left=t.left+(t.width-e.offsetWidth)/2+"px",e.style.top=t.bottom+"px";break;case"left":e.style.left=t.left-e.offsetWidth+"px",e.style.top=t.top+(t.height-e.offsetHeight)/2+"px"}},r=function(e){const t=e.parentElement.getBoundingClientRect(),n=e.getBoundingClientRect(),s=n.width-Math.max(n.right-t.right,0)-Math.max(t.left-n.left,0),i=n.height-Math.max(n.bottom-t.bottom,0)-Math.max(t.top-n.top,0);return n.width*n.height-s*i},a={bottom:["left","right","top","bottom"],left:["right","top","bottom","left"],right:["left","top","bottom","right"],top:["left","right","bottom","top"]},o=function(e,t){const s=n.get(this),i=[];"getBoundingClientRect"in e&&(e=e.getBoundingClientRect());let o=0;do{l(s.element,e,t[o]),i.push(r(s.element)),o+=1}while(i[o-1]>0&&o<t.length);i[o-1]>0&&function(e,t,n,s){const i=Math.min.apply(Math,n),r=s[n.indexOf(i)];l(e,t,r);const o=e.parentElement.getBoundingClientRect();let u=e.getBoundingClientRect();a[r].forEach(t=>{(("top"===t||"left"===t)&&u[t]<o[t]||("bottom"===t||"right"===t)&&u[t]>o[t])&&(e.style[t]="10px",u=e.getBoundingClientRect())})}(s.element,e,i,t)},u=function(){const e=n.get(this);null==e.element||e.element.classList.contains("in")||(t.removeFullscreenChangeCallback(document.body,e.on_fullscreen_change),e.element.remove(),e.element=null,e.refPosition=null,null!=e.refContainer&&function(e,t){const s=n.get(t);e.contextManager.removeCallback(s.update_popover_visibility_bound),e.removeEventListener("unload",s.on_widget_unload),delete s.update_popover_visibility_bound,delete s.on_widget_unload}(e.refContainer,this),"Wirecloud"in window&&Wirecloud.UserInterfaceManager._unregisterPopup(this),this.options.sticky||e.baseelement.ownerDocument.removeEventListener("click",e.disableCallback,!0),this.dispatchEvent("hide"))};e.Popover=class extends e.StyledElement{constructor(e){super([]),Object.defineProperty(this,"options",{value:t.merge({refContainer:null,content:"",title:"",class:"",html:!1,placement:["right","bottom","left","top"],sticky:!1},e)});const s={element:null,disableCallback:function(e){0===e.button&&setTimeout(this.hide.bind(this),0)}.bind(this),refContainer:this.options.refContainer,on_fullscreen_change:e=>{s.baseelement=t.getFullscreenElement()||document.body,s.baseelement.appendChild(s.element),this.repaint()}};n.set(this,s),delete this.options.refContainer}get visible(){return null!=n.get(this).element}bind(e,t){switch(t){case"click":e.addEventListener("click",this.toggle.bind(this),!0);break;case"hover":e.addEventListener("focus",this.show.bind(this,e),!1),e.addEventListener("blur",this.hide.bind(this),!1),e.addEventListener("mouseenter",this.show.bind(this,e),!0),e.addEventListener("mouseleave",this.hide.bind(this),!0),e.addEventListener("click",this.show.bind(this,e),!1);break;default:throw new TypeError("Invalid mode: "+t)}return this}disablePointerEvents(){const e=n.get(this);return e.element&&(e.element.style.pointerEvents="none"),this}enablePointerEvents(){const e=n.get(this);return e.element&&(e.element.style.pointerEvents=""),this}toggle(e){return this.visible?this.hide():this.show(e)}repaint(){const e=n.get(this);return e.refPosition&&o.call(this,e.refPosition,this.options.placement),this}show(e){return function(e){const l=n.get(this);return"Wirecloud"in window&&Wirecloud.UserInterfaceManager._registerPopup(this),this.visible?(l.element.classList.add("in"),this.repaint()):(l.element=s.parse('<s:styledgui xmlns:s="http://wirecloud.conwet.fi.upm.es/StyledElements" xmlns:t="http://wirecloud.conwet.fi.upm.es/Template" xmlns="http://www.w3.org/1999/xhtml"><div class="popover fade"><div class="arrow"/><h3 class="popover-title"><t:title/></h3><div class="popover-content"><t:content/></div></div></s:styledgui>',{title:this.options.title,content:this.options.content}).elements[0],l.element.addEventListener("transitionend",u.bind(this)),l.baseelement=t.getFullscreenElement()||document.body,l.baseelement.appendChild(l.element),t.onFullscreenChange(document.body,l.on_fullscreen_change),null!=l.refContainer&&i(l.refContainer,this),l.element.classList.toggle("sticky",this.options.sticky),this.options.sticky||l.baseelement.ownerDocument.addEventListener("click",l.disableCallback,!0),l.refPosition=e,o.call(this,l.refPosition,this.options.placement),l.element.classList.add("in"),this.dispatchEvent("show"),this)}.call(this,e)}hide(){if(!this.visible)return this;const e=n.get(this),t=!e.element.classList.contains("in")||"0"===getComputedStyle(e.element).getPropertyValue("opacity");return e.element.classList.remove("in"),t&&u.call(this),this}}}(StyledElements,StyledElements.Utils),function(e,t){"use strict";const n={class:"",events:[],title:"",subtitle:"",state:"default",selectable:!1,noBody:!1,buttons:[]};Object.freeze(n),e.Panel=class extends e.StyledElement{constructor(s){s=t.merge({},n,s),super(["click"].concat(s.events)),this.wrapperElement=document.createElement("div"),this.wrapperElement.className="panel",s.state&&this.addClassName("panel-"+s.state),s.selectable&&this.addClassName("panel-selectable"),this.addClassName(s.class),this.heading=new e.Container({class:"panel-heading"}),this.heading.insertInto(this.wrapperElement),s.title&&this.setTitle(s.title),s.buttons.length&&(this.buttons=new e.Container({class:"panel-options"}),s.buttons.forEach(function(e){this.buttons.appendChild(e)},this),this.heading.appendChild(this.buttons)),s.subtitle&&this.setSubtitle(s.subtitle),s.noBody||(this.body=new e.Container({class:"panel-body"}),this.body.insertInto(this.wrapperElement)),Object.defineProperties(this,{active:{get:function(){return this.hasClassName("active")},set:function(e){this.active!==e&&this.toggleClassName("active",e)._onactive(e)}},title:{get:function(){return this.heading.title.text()}}}),this.wrapperElement.addEventListener("click",this._onclick.bind(this))}_onactive(e){}_onclick(e){return e.stopPropagation(),this.dispatchEvent("click",e)}clear(){return null!=this.body&&this.body.clear(),this}setTitle(t){return null==this.heading.title&&(this.heading.title=new e.Container({class:"panel-title"}),this.heading.appendChild(this.heading.title)),this.heading.title.clear().appendChild(t),this}setSubtitle(t){return null==this.heading.subtitle&&(this.heading.subtitle=new e.Container({class:"panel-subtitle"}),this.heading.appendChild(this.heading.subtitle)),this.heading.subtitle.clear().appendChild(t),this}}}(StyledElements,StyledElements.Utils),function(e,t){"use strict";const n=new e.GUIBuilder,s={autocomplete:!0,minLength:1},i=function(){this.disableChangeEvents||(null!=this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout(l.bind(this),150))},l=function(){this.timeout=null,this.userQuery=this.cleanedQuery,null!=this.currentRequest&&"abort"in this.currentRequest&&this.currentRequest.abort(),this.currentRequest=null,this.userQuery.length>=this.minLength?(this.currentRequest=this.lookup(this.userQuery),null!=this.currentRequest&&"object"==typeof this.currentRequest&&"then"in this.currentRequest||(this.currentRequest=Promise.resolve(this.currentRequest)),this.currentRequest.then(r.bind(this))):this.popupMenu.hide()},r=function(e){if(this.currentRequest=null,this.popupMenu.clear(),Array.isArray(e)&&e.length>0)this.compare&&(e=function(e){return e.filter(e=>0===this.compare(this.userQuery,e))}.call(this,e)),e.forEach(e=>{this.popupMenu.append(a.call(this,this.build(this,e)))});else{let e=null!=this.notFoundMessage?this.notFoundMessage:t.gettext("No results found for <em><t:query/></em>");e=n.DEFAULT_OPENING+e+n.DEFAULT_CLOSING,e=n.parse(e,{query:this.cleanedQuery});const s=new StyledElements.MenuItem(e);this.popupMenu.append(s.disable())}return this.popupMenu.show(this.textField),this.dispatchEvent("show",e)},a=function(n){const s=new e.MenuItem(new e.Fragment(t.highlight(n.title,this.userQuery)),null,n);return n.iconClass&&s.addIconClass(n.iconClass),n.description&&s.setDescription(new e.Fragment(t.highlight(n.description,this.userQuery))),s};e.Typeahead=class extends e.ObjectWithEvents{constructor(n){if("function"!=typeof(n=t.merge({},s,n)).build)throw new TypeError("build option must be a function");if("function"!=typeof n.lookup)throw new TypeError("lookup option must be a function");if(null!=n.compare&&"function"!=typeof n.compare)throw new TypeError("compare option must be a function");super(["select","show"]),this.notFoundMessage=n.notFoundMessage,this.timeout=null,this.currentRequest=null;const i=new e.PopupMenu({oneActiveAtLeast:!0,useRefElementWidth:!0});i.addEventListener("click",function(e,t){this.disableChangeEvents=!0,this.textField.setValue(this.autocomplete?t.context.value:""),this.textField.focus(),this.disableChangeEvents=!1,t.context=t.context.context,this.dispatchEvent("select",t)}.bind(this)),Object.defineProperties(this,{autocomplete:{value:n.autocomplete},build:{value:n.build},compare:{value:n.compare},lookup:{value:n.lookup},minLength:{value:n.minLength},popupMenu:{value:i}})}get cleanedQuery(){return null!=this.textField?this.textField.value.trim().split(/\s+/).join(" "):""}bind(t){if(!(t instanceof e.TextField))throw new TypeError;return this.textField=t,this.textField.inputElement.setAttribute("autocomplete","off"),this.textField.inputElement.setAttribute("autocorrect","off"),this.textField.inputElement.setAttribute("spellcheck","false"),this.textField.addEventListener("change",i.bind(this)),this.textField.addEventListener("keydown",function(e,t,n){if(this.popupMenu.hasEnabledItem())switch(n){case"Tab":case"Enter":t.preventDefault(),this.popupMenu.activeItem.click();break;case"ArrowDown":t.preventDefault(),this.popupMenu.moveCursorDown();break;case"ArrowUp":t.preventDefault(),this.popupMenu.moveCursorUp()}}.bind(this)),this.textField.addEventListener("submit",function(e){this.popupMenu.hasEnabledItem()&&this.popupMenu.activeItem.click()}.bind(this)),this.textField.addEventListener("focus",i.bind(this)),this.textField.addEventListener("blur",function(e){null!=this.timeout&&clearTimeout(this.timeout),null!=this.currentRequest&&"abort"in this.currentRequest&&this.currentRequest.abort(),this.timeout=null,this.currentRequest=null,setTimeout(this.popupMenu.hide.bind(this.popupMenu),100)}.bind(this)),this}}}(StyledElements,StyledElements.Utils);